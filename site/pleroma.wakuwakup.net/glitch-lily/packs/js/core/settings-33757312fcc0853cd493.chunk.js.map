{"version":3,"sources":["webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/initial_state.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/emoji/unicode_to_filename.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/ready.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/emoji/emoji.js","webpack:///./node_modules/@rails/ujs/lib/assets/compiled/rails-ujs.js","webpack:///./node_modules/escape-html/index.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/packs/public-path.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/emoji/emoji_unicode_mapping_light.js","webpack:///./node_modules/substring-trie/index.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/utils/config.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/core/settings.js"],"names":["element","document","getElementById","initialState","JSON","parse","textContent","getMeta","prop","meta","reduceMotion","autoPlayGif","displayMedia","expandSpoilers","unfollowModal","boostModal","deleteModal","me","searchEnabled","maxChars","max_toot_chars","limitedFederationMode","repository","source_url","version","mascot","profile_directory","forceSingleColumn","useBlurhash","usePendingItems","showTrends","title","cropImages","disableSwiping","languages","exports","unicodeToFilename","str","result","charCode","p","i","length","charCodeAt","toString","ready","loaded","includes","readyState","addEventListener","trie","Trie","Object","keys","unicodeMapping","emojiFilenames","emojis","map","v","filename","darkEmoji","lightEmoji","emojiFilename","body","classList","contains","emojify","customEmojis","tagCharsWithEmojis","rtn","tagChars","invisible","match","tag","indexOf","search","slice","codePointAt","rend","replacement","lt","shortname","url","static_url","startsWith","shortCode","assetHost","buildCustomEmojis","forEach","emoji","shortcode","get","name","replace","push","id","short_names","text","emoticons","keywords","imageUrl","custom","customCategory","categoriesFromEmojis","reduce","set","add","Set","this","Rails","linkClickSelector","buttonClickSelector","selector","exclude","inputChangeSelector","formSubmitSelector","formInputClickSelector","formDisableSelector","formEnableSelector","fileInputSelector","linkDisableSelector","buttonDisableSelector","call","nonce","loadCSPNonce","ref","querySelector","content","cspNonce","m","Element","prototype","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","getData","key","setData","value","$","Array","querySelectorAll","csrfParam","csrfToken","CSRFProtection","xhr","token","setRequestHeader","refreshCSRFTokens","param","input","CustomEvent","fire","preventDefault","window","event","params","evt","createEvent","initCustomEvent","bubbles","cancelable","detail","Event","defaultPrevented","defineProperty","obj","data","dispatchEvent","stopEverything","e","target","stopPropagation","stopImmediatePropagation","delegate","eventType","handler","parentNode","AcceptHeaders","createXHR","prepareOptions","processResponse","html","xml","json","script","ajax","options","response","responseText","getResponseHeader","Math","floor","status","success","statusText","error","complete","beforeSend","XMLHttpRequest","OPENED","send","location","href","type","toUpperCase","dataType","accept","done","open","crossDomain","withCredentials","onreadystatechange","DONE","parser","createElement","setAttribute","head","appendChild","removeChild","DOMParser","parseFromString","isCrossDomain","originAnchor","urlAnchor","protocol","host","toArray","serializeElement","additionalParam","inputs","elements","disabled","option","selected","checked","encodeURIComponent","join","formElements","form","filter","el","allowAction","handleConfirm","confirm","message","answer","callback","getAttribute","disableFormElement","disableFormElements","disableLinkElement","enableFormElement","enableFormElements","enableLinkElement","isXhrRedirect","handleDisabledElement","enableElement","disableElement","innerHTML","originalText","removeEventListener","handleMethod","formContent","link","method","action","style","display","click","isRemote","handleRemote","button","enctype","FormData","append","args","arguments","formSubmitButtonClick","formNoValidate","preventInsignificantClick","insignificantMetaClick","metaKey","ctrlKey","jQuery","rails","Error","ajaxPrefilter","originalOptions","start","_rails_loaded","setTimeout","module","matchHtmlRegExp","string","escape","exec","index","lastIndex","substring","removeOuterSlashes","cdnHost","__webpack_public_path__","path","formattedHost","test","formatPublicPath","process","shortCodesToEmojiData","skins","categories","emojisWithoutShortCodes","require","processEmojiMapData","emojiMapData","native","filenameData","MiniTrie","words","_dict","len","word","dict","j","len2","char","charAt","stack","pop","escapeTextContentForBrowser","dataset","default","avatar","file","files","URL","createObjectURL","originalSrc","src","header","lock","hidden","focus","select","setSelectionRange","oldReadOnly","readonly","execCommand","blur","remove","err","console"],"mappings":"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","file":"js/core/settings-33757312fcc0853cd493.chunk.js","sourcesContent":["const element = document.getElementById('initial-state');\nconst initialState = element && JSON.parse(element.textContent);\n\nconst getMeta = (prop) => initialState && initialState.meta && initialState.meta[prop];\n\nexport const reduceMotion = getMeta('reduce_motion');\nexport const autoPlayGif = getMeta('auto_play_gif');\nexport const displayMedia = getMeta('display_media');\nexport const expandSpoilers = getMeta('expand_spoilers');\nexport const unfollowModal = getMeta('unfollow_modal');\nexport const boostModal = getMeta('boost_modal');\nexport const deleteModal = getMeta('delete_modal');\nexport const me = getMeta('me');\nexport const searchEnabled = getMeta('search_enabled');\nexport const maxChars = (initialState && initialState.max_toot_chars) || 500;\nexport const limitedFederationMode = getMeta('limited_federation_mode');\nexport const repository = getMeta('repository');\nexport const source_url = getMeta('source_url');\nexport const version = getMeta('version');\nexport const mascot = getMeta('mascot');\nexport const profile_directory = getMeta('profile_directory');\nexport const forceSingleColumn = !getMeta('advanced_layout');\nexport const useBlurhash = getMeta('use_blurhash');\nexport const usePendingItems = getMeta('use_pending_items');\nexport const showTrends = getMeta('trends');\nexport const title = getMeta('title');\nexport const cropImages = getMeta('crop_images');\nexport const disableSwiping = getMeta('disable_swiping');\nexport const languages = initialState && initialState.languages;\n\nexport default initialState;\n","// taken from:\n// https://github.com/twitter/twemoji/blob/47732c7/twemoji-generator.js#L848-L866\nexports.unicodeToFilename = (str) => {\n  let result = '';\n  let charCode = 0;\n  let p = 0;\n  let i = 0;\n  while (i < str.length) {\n    charCode = str.charCodeAt(i++);\n    if (p) {\n      if (result.length > 0) {\n        result += '-';\n      }\n      result += (0x10000 + ((p - 0xD800) << 10) + (charCode - 0xDC00)).toString(16);\n      p = 0;\n    } else if (0xD800 <= charCode && charCode <= 0xDBFF) {\n      p = charCode;\n    } else {\n      if (result.length > 0) {\n        result += '-';\n      }\n      result += charCode.toString(16);\n    }\n  }\n  return result;\n};\n","export default function ready(loaded) {\n  if (['interactive', 'complete'].includes(document.readyState)) {\n    loaded();\n  } else {\n    document.addEventListener('DOMContentLoaded', loaded);\n  }\n}\n","import { autoPlayGif } from '../../initial_state';\nimport unicodeMapping from './emoji_unicode_mapping_light';\nimport { assetHost } from 'mastodon/utils/config';\nimport Trie from 'substring-trie';\n\nconst trie = new Trie(Object.keys(unicodeMapping));\n\n// Convert to file names from emojis. (For different variation selector emojis)\nconst emojiFilenames = (emojis) => {\n  return emojis.map(v => unicodeMapping[v].filename);\n};\n\n// Emoji requiring extra borders depending on theme\nconst darkEmoji = emojiFilenames(['🎱', '🐜', '⚫', '🖤', '⬛', '◼️', '◾', '◼️', '✒️', '▪️', '💣', '🎳', '📷', '📸', '♣️', '🕶️', '✴️', '🔌', '💂‍♀️', '📽️', '🍳', '🦍', '💂', '🔪', '🕳️', '🕹️', '🕋', '🖊️', '🖋️', '💂‍♂️', '🎤', '🎓', '🎥', '🎼', '♠️', '🎩', '🦃', '📼', '📹', '🎮', '🐃', '🏴', '🐞', '🕺', '📱', '📲', '🚲']);\nconst lightEmoji = emojiFilenames(['👽', '⚾', '🐔', '☁️', '💨', '🕊️', '👀', '🍥', '👻', '🐐', '❕', '❔', '⛸️', '🌩️', '🔊', '🔇', '📃', '🌧️', '🐏', '🍚', '🍙', '🐓', '🐑', '💀', '☠️', '🌨️', '🔉', '🔈', '💬', '💭', '🏐', '🏳️', '⚪', '⬜', '◽', '◻️', '▫️']);\n\nconst emojiFilename = (filename) => {\n  const borderedEmoji = (document.body && document.body.classList.contains('theme-mastodon-light')) ? lightEmoji : darkEmoji;\n  return borderedEmoji.includes(filename) ? (filename + '_border') : filename;\n};\n\nconst emojify = (str, customEmojis = {}) => {\n  const tagCharsWithoutEmojis = '<&';\n  const tagCharsWithEmojis = Object.keys(customEmojis).length ? '<&:' : '<&';\n  let rtn = '', tagChars = tagCharsWithEmojis, invisible = 0;\n  for (;;) {\n    let match, i = 0, tag;\n    while (i < str.length && (tag = tagChars.indexOf(str[i])) === -1 && (invisible || !(match = trie.search(str.slice(i))))) {\n      i += str.codePointAt(i) < 65536 ? 1 : 2;\n    }\n    let rend, replacement = '';\n    if (i === str.length) {\n      break;\n    } else if (str[i] === ':') {\n      if (!(() => {\n        rend = str.indexOf(':', i + 1) + 1;\n        if (!rend) return false; // no pair of ':'\n        const lt = str.indexOf('<', i + 1);\n        if (!(lt === -1 || lt >= rend)) return false; // tag appeared before closing ':'\n        const shortname = str.slice(i, rend);\n        // now got a replacee as ':shortname:'\n        // if you want additional emoji handler, add statements below which set replacement and return true.\n        if (shortname in customEmojis) {\n          const filename = autoPlayGif ? customEmojis[shortname].url : customEmojis[shortname].static_url;\n          replacement = `<img draggable=\"false\" class=\"emojione custom-emoji\" alt=\"${shortname}\" title=\"${shortname}\" src=\"${filename}\" data-original=\"${customEmojis[shortname].url}\" data-static=\"${customEmojis[shortname].static_url}\" />`;\n          return true;\n        }\n        return false;\n      })()) rend = ++i;\n    } else if (tag >= 0) { // <, &\n      rend = str.indexOf('>;'[tag], i + 1) + 1;\n      if (!rend) {\n        break;\n      }\n      if (tag === 0) {\n        if (invisible) {\n          if (str[i + 1] === '/') { // closing tag\n            if (!--invisible) {\n              tagChars = tagCharsWithEmojis;\n            }\n          } else if (str[rend - 2] !== '/') { // opening tag\n            invisible++;\n          }\n        } else {\n          if (str.startsWith('<span class=\"invisible\">', i)) {\n            // avoid emojifying on invisible text\n            invisible = 1;\n            tagChars = tagCharsWithoutEmojis;\n          }\n        }\n      }\n      i = rend;\n    } else { // matched to unicode emoji\n      const { filename, shortCode } = unicodeMapping[match];\n      const title = shortCode ? `:${shortCode}:` : '';\n      replacement = `<img draggable=\"false\" class=\"emojione\" alt=\"${match}\" title=\"${title}\" src=\"${assetHost}/emoji/${emojiFilename(filename)}.svg\" />`;\n      rend = i + match.length;\n      // If the matched character was followed by VS15 (for selecting text presentation), skip it.\n      if (str.codePointAt(rend) === 65038) {\n        rend += 1;\n      }\n    }\n    rtn += str.slice(0, i) + replacement;\n    str = str.slice(rend);\n  }\n  return rtn + str;\n};\n\nexport default emojify;\n\nexport const buildCustomEmojis = (customEmojis) => {\n  const emojis = [];\n\n  customEmojis.forEach(emoji => {\n    const shortcode = emoji.get('shortcode');\n    const url       = autoPlayGif ? emoji.get('url') : emoji.get('static_url');\n    const name      = shortcode.replace(':', '');\n\n    emojis.push({\n      id: name,\n      name,\n      short_names: [name],\n      text: '',\n      emoticons: [],\n      keywords: [name],\n      imageUrl: url,\n      custom: true,\n      customCategory: emoji.get('category'),\n    });\n  });\n\n  return emojis;\n};\n\nexport const categoriesFromEmojis = customEmojis => customEmojis.reduce((set, emoji) => set.add(emoji.get('category') ? `custom-${emoji.get('category')}` : 'custom'), new Set(['custom']));\n","/*\nUnobtrusive JavaScript\nhttps://github.com/rails/rails/blob/main/actionview/app/assets/javascripts\nReleased under the MIT license\n */\n;\n(function () {\n  var context = this;\n  (function () {\n    (function () {\n      this.Rails = {\n        linkClickSelector: 'a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]',\n        buttonClickSelector: {\n          selector: 'button[data-remote]:not([form]), button[data-confirm]:not([form])',\n          exclude: 'form button'\n        },\n        inputChangeSelector: 'select[data-remote], input[data-remote], textarea[data-remote]',\n        formSubmitSelector: 'form:not([data-turbo=true])',\n        formInputClickSelector: 'form:not([data-turbo=true]) input[type=submit], form:not([data-turbo=true]) input[type=image], form:not([data-turbo=true]) button[type=submit], form:not([data-turbo=true]) button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])',\n        formDisableSelector: 'input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled',\n        formEnableSelector: 'input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled',\n        fileInputSelector: 'input[name][type=file]:not([disabled])',\n        linkDisableSelector: 'a[data-disable-with], a[data-disable]',\n        buttonDisableSelector: 'button[data-remote][data-disable-with], button[data-remote][data-disable]'\n      };\n    }).call(this);\n  }).call(context);\n  var Rails = context.Rails;\n  (function () {\n    (function () {\n      var nonce;\n      nonce = null;\n\n      Rails.loadCSPNonce = function () {\n        var ref;\n        return nonce = (ref = document.querySelector(\"meta[name=csp-nonce]\")) != null ? ref.content : void 0;\n      };\n\n      Rails.cspNonce = function () {\n        return nonce != null ? nonce : Rails.loadCSPNonce();\n      };\n    }).call(this);\n    (function () {\n      var expando, m;\n      m = Element.prototype.matches || Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector;\n\n      Rails.matches = function (element, selector) {\n        if (selector.exclude != null) {\n          return m.call(element, selector.selector) && !m.call(element, selector.exclude);\n        } else {\n          return m.call(element, selector);\n        }\n      };\n\n      expando = '_ujsData';\n\n      Rails.getData = function (element, key) {\n        var ref;\n        return (ref = element[expando]) != null ? ref[key] : void 0;\n      };\n\n      Rails.setData = function (element, key, value) {\n        if (element[expando] == null) {\n          element[expando] = {};\n        }\n\n        return element[expando][key] = value;\n      };\n\n      Rails.$ = function (selector) {\n        return Array.prototype.slice.call(document.querySelectorAll(selector));\n      };\n    }).call(this);\n    (function () {\n      var $, csrfParam, csrfToken;\n      $ = Rails.$;\n\n      csrfToken = Rails.csrfToken = function () {\n        var meta;\n        meta = document.querySelector('meta[name=csrf-token]');\n        return meta && meta.content;\n      };\n\n      csrfParam = Rails.csrfParam = function () {\n        var meta;\n        meta = document.querySelector('meta[name=csrf-param]');\n        return meta && meta.content;\n      };\n\n      Rails.CSRFProtection = function (xhr) {\n        var token;\n        token = csrfToken();\n\n        if (token != null) {\n          return xhr.setRequestHeader('X-CSRF-Token', token);\n        }\n      };\n\n      Rails.refreshCSRFTokens = function () {\n        var param, token;\n        token = csrfToken();\n        param = csrfParam();\n\n        if (token != null && param != null) {\n          return $('form input[name=\"' + param + '\"]').forEach(function (input) {\n            return input.value = token;\n          });\n        }\n      };\n    }).call(this);\n    (function () {\n      var CustomEvent, fire, matches, preventDefault;\n      matches = Rails.matches;\n      CustomEvent = window.CustomEvent;\n\n      if (typeof CustomEvent !== 'function') {\n        CustomEvent = function (event, params) {\n          var evt;\n          evt = document.createEvent('CustomEvent');\n          evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n          return evt;\n        };\n\n        CustomEvent.prototype = window.Event.prototype;\n        preventDefault = CustomEvent.prototype.preventDefault;\n\n        CustomEvent.prototype.preventDefault = function () {\n          var result;\n          result = preventDefault.call(this);\n\n          if (this.cancelable && !this.defaultPrevented) {\n            Object.defineProperty(this, 'defaultPrevented', {\n              get: function () {\n                return true;\n              }\n            });\n          }\n\n          return result;\n        };\n      }\n\n      fire = Rails.fire = function (obj, name, data) {\n        var event;\n        event = new CustomEvent(name, {\n          bubbles: true,\n          cancelable: true,\n          detail: data\n        });\n        obj.dispatchEvent(event);\n        return !event.defaultPrevented;\n      };\n\n      Rails.stopEverything = function (e) {\n        fire(e.target, 'ujs:everythingStopped');\n        e.preventDefault();\n        e.stopPropagation();\n        return e.stopImmediatePropagation();\n      };\n\n      Rails.delegate = function (element, selector, eventType, handler) {\n        return element.addEventListener(eventType, function (e) {\n          var target;\n          target = e.target;\n\n          while (!(!(target instanceof Element) || matches(target, selector))) {\n            target = target.parentNode;\n          }\n\n          if (target instanceof Element && handler.call(target, e) === false) {\n            e.preventDefault();\n            return e.stopPropagation();\n          }\n        });\n      };\n    }).call(this);\n    (function () {\n      var AcceptHeaders, CSRFProtection, createXHR, cspNonce, fire, prepareOptions, processResponse;\n      cspNonce = Rails.cspNonce, CSRFProtection = Rails.CSRFProtection, fire = Rails.fire;\n      AcceptHeaders = {\n        '*': '*/*',\n        text: 'text/plain',\n        html: 'text/html',\n        xml: 'application/xml, text/xml',\n        json: 'application/json, text/javascript',\n        script: 'text/javascript, application/javascript, application/ecmascript, application/x-ecmascript'\n      };\n\n      Rails.ajax = function (options) {\n        var xhr;\n        options = prepareOptions(options);\n        xhr = createXHR(options, function () {\n          var ref, response;\n          response = processResponse((ref = xhr.response) != null ? ref : xhr.responseText, xhr.getResponseHeader('Content-Type'));\n\n          if (Math.floor(xhr.status / 100) === 2) {\n            if (typeof options.success === \"function\") {\n              options.success(response, xhr.statusText, xhr);\n            }\n          } else {\n            if (typeof options.error === \"function\") {\n              options.error(response, xhr.statusText, xhr);\n            }\n          }\n\n          return typeof options.complete === \"function\" ? options.complete(xhr, xhr.statusText) : void 0;\n        });\n\n        if (options.beforeSend != null && !options.beforeSend(xhr, options)) {\n          return false;\n        }\n\n        if (xhr.readyState === XMLHttpRequest.OPENED) {\n          return xhr.send(options.data);\n        }\n      };\n\n      prepareOptions = function (options) {\n        options.url = options.url || location.href;\n        options.type = options.type.toUpperCase();\n\n        if (options.type === 'GET' && options.data) {\n          if (options.url.indexOf('?') < 0) {\n            options.url += '?' + options.data;\n          } else {\n            options.url += '&' + options.data;\n          }\n        }\n\n        if (AcceptHeaders[options.dataType] == null) {\n          options.dataType = '*';\n        }\n\n        options.accept = AcceptHeaders[options.dataType];\n\n        if (options.dataType !== '*') {\n          options.accept += ', */*; q=0.01';\n        }\n\n        return options;\n      };\n\n      createXHR = function (options, done) {\n        var xhr;\n        xhr = new XMLHttpRequest();\n        xhr.open(options.type, options.url, true);\n        xhr.setRequestHeader('Accept', options.accept);\n\n        if (typeof options.data === 'string') {\n          xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n        }\n\n        if (!options.crossDomain) {\n          xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n          CSRFProtection(xhr);\n        }\n\n        xhr.withCredentials = !!options.withCredentials;\n\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState === XMLHttpRequest.DONE) {\n            return done(xhr);\n          }\n        };\n\n        return xhr;\n      };\n\n      processResponse = function (response, type) {\n        var parser, script;\n\n        if (typeof response === 'string' && typeof type === 'string') {\n          if (type.match(/\\bjson\\b/)) {\n            try {\n              response = JSON.parse(response);\n            } catch (error) {}\n          } else if (type.match(/\\b(?:java|ecma)script\\b/)) {\n            script = document.createElement('script');\n            script.setAttribute('nonce', cspNonce());\n            script.text = response;\n            document.head.appendChild(script).parentNode.removeChild(script);\n          } else if (type.match(/\\b(xml|html|svg)\\b/)) {\n            parser = new DOMParser();\n            type = type.replace(/;.+/, '');\n\n            try {\n              response = parser.parseFromString(response, type);\n            } catch (error) {}\n          }\n        }\n\n        return response;\n      };\n\n      Rails.href = function (element) {\n        return element.href;\n      };\n\n      Rails.isCrossDomain = function (url) {\n        var e, originAnchor, urlAnchor;\n        originAnchor = document.createElement('a');\n        originAnchor.href = location.href;\n        urlAnchor = document.createElement('a');\n\n        try {\n          urlAnchor.href = url;\n          return !((!urlAnchor.protocol || urlAnchor.protocol === ':') && !urlAnchor.host || originAnchor.protocol + '//' + originAnchor.host === urlAnchor.protocol + '//' + urlAnchor.host);\n        } catch (error) {\n          e = error;\n          return true;\n        }\n      };\n    }).call(this);\n    (function () {\n      var matches, toArray;\n      matches = Rails.matches;\n\n      toArray = function (e) {\n        return Array.prototype.slice.call(e);\n      };\n\n      Rails.serializeElement = function (element, additionalParam) {\n        var inputs, params;\n        inputs = [element];\n\n        if (matches(element, 'form')) {\n          inputs = toArray(element.elements);\n        }\n\n        params = [];\n        inputs.forEach(function (input) {\n          if (!input.name || input.disabled) {\n            return;\n          }\n\n          if (matches(input, 'fieldset[disabled] *')) {\n            return;\n          }\n\n          if (matches(input, 'select')) {\n            return toArray(input.options).forEach(function (option) {\n              if (option.selected) {\n                return params.push({\n                  name: input.name,\n                  value: option.value\n                });\n              }\n            });\n          } else if (input.checked || ['radio', 'checkbox', 'submit'].indexOf(input.type) === -1) {\n            return params.push({\n              name: input.name,\n              value: input.value\n            });\n          }\n        });\n\n        if (additionalParam) {\n          params.push(additionalParam);\n        }\n\n        return params.map(function (param) {\n          if (param.name != null) {\n            return encodeURIComponent(param.name) + \"=\" + encodeURIComponent(param.value);\n          } else {\n            return param;\n          }\n        }).join('&');\n      };\n\n      Rails.formElements = function (form, selector) {\n        if (matches(form, 'form')) {\n          return toArray(form.elements).filter(function (el) {\n            return matches(el, selector);\n          });\n        } else {\n          return toArray(form.querySelectorAll(selector));\n        }\n      };\n    }).call(this);\n    (function () {\n      var allowAction, fire, stopEverything;\n      fire = Rails.fire, stopEverything = Rails.stopEverything;\n\n      Rails.handleConfirm = function (e) {\n        if (!allowAction(this)) {\n          return stopEverything(e);\n        }\n      };\n\n      Rails.confirm = function (message, element) {\n        return confirm(message);\n      };\n\n      allowAction = function (element) {\n        var answer, callback, message;\n        message = element.getAttribute('data-confirm');\n\n        if (!message) {\n          return true;\n        }\n\n        answer = false;\n\n        if (fire(element, 'confirm')) {\n          try {\n            answer = Rails.confirm(message, element);\n          } catch (error) {}\n\n          callback = fire(element, 'confirm:complete', [answer]);\n        }\n\n        return answer && callback;\n      };\n    }).call(this);\n    (function () {\n      var disableFormElement, disableFormElements, disableLinkElement, enableFormElement, enableFormElements, enableLinkElement, formElements, getData, isXhrRedirect, matches, setData, stopEverything;\n      matches = Rails.matches, getData = Rails.getData, setData = Rails.setData, stopEverything = Rails.stopEverything, formElements = Rails.formElements;\n\n      Rails.handleDisabledElement = function (e) {\n        var element;\n        element = this;\n\n        if (element.disabled) {\n          return stopEverything(e);\n        }\n      };\n\n      Rails.enableElement = function (e) {\n        var element;\n\n        if (e instanceof Event) {\n          if (isXhrRedirect(e)) {\n            return;\n          }\n\n          element = e.target;\n        } else {\n          element = e;\n        }\n\n        if (matches(element, Rails.linkDisableSelector)) {\n          return enableLinkElement(element);\n        } else if (matches(element, Rails.buttonDisableSelector) || matches(element, Rails.formEnableSelector)) {\n          return enableFormElement(element);\n        } else if (matches(element, Rails.formSubmitSelector)) {\n          return enableFormElements(element);\n        }\n      };\n\n      Rails.disableElement = function (e) {\n        var element;\n        element = e instanceof Event ? e.target : e;\n\n        if (matches(element, Rails.linkDisableSelector)) {\n          return disableLinkElement(element);\n        } else if (matches(element, Rails.buttonDisableSelector) || matches(element, Rails.formDisableSelector)) {\n          return disableFormElement(element);\n        } else if (matches(element, Rails.formSubmitSelector)) {\n          return disableFormElements(element);\n        }\n      };\n\n      disableLinkElement = function (element) {\n        var replacement;\n\n        if (getData(element, 'ujs:disabled')) {\n          return;\n        }\n\n        replacement = element.getAttribute('data-disable-with');\n\n        if (replacement != null) {\n          setData(element, 'ujs:enable-with', element.innerHTML);\n          element.innerHTML = replacement;\n        }\n\n        element.addEventListener('click', stopEverything);\n        return setData(element, 'ujs:disabled', true);\n      };\n\n      enableLinkElement = function (element) {\n        var originalText;\n        originalText = getData(element, 'ujs:enable-with');\n\n        if (originalText != null) {\n          element.innerHTML = originalText;\n          setData(element, 'ujs:enable-with', null);\n        }\n\n        element.removeEventListener('click', stopEverything);\n        return setData(element, 'ujs:disabled', null);\n      };\n\n      disableFormElements = function (form) {\n        return formElements(form, Rails.formDisableSelector).forEach(disableFormElement);\n      };\n\n      disableFormElement = function (element) {\n        var replacement;\n\n        if (getData(element, 'ujs:disabled')) {\n          return;\n        }\n\n        replacement = element.getAttribute('data-disable-with');\n\n        if (replacement != null) {\n          if (matches(element, 'button')) {\n            setData(element, 'ujs:enable-with', element.innerHTML);\n            element.innerHTML = replacement;\n          } else {\n            setData(element, 'ujs:enable-with', element.value);\n            element.value = replacement;\n          }\n        }\n\n        element.disabled = true;\n        return setData(element, 'ujs:disabled', true);\n      };\n\n      enableFormElements = function (form) {\n        return formElements(form, Rails.formEnableSelector).forEach(enableFormElement);\n      };\n\n      enableFormElement = function (element) {\n        var originalText;\n        originalText = getData(element, 'ujs:enable-with');\n\n        if (originalText != null) {\n          if (matches(element, 'button')) {\n            element.innerHTML = originalText;\n          } else {\n            element.value = originalText;\n          }\n\n          setData(element, 'ujs:enable-with', null);\n        }\n\n        element.disabled = false;\n        return setData(element, 'ujs:disabled', null);\n      };\n\n      isXhrRedirect = function (event) {\n        var ref, xhr;\n        xhr = (ref = event.detail) != null ? ref[0] : void 0;\n        return (xhr != null ? xhr.getResponseHeader(\"X-Xhr-Redirect\") : void 0) != null;\n      };\n    }).call(this);\n    (function () {\n      var stopEverything;\n      stopEverything = Rails.stopEverything;\n\n      Rails.handleMethod = function (e) {\n        var csrfParam, csrfToken, form, formContent, href, link, method;\n        link = this;\n        method = link.getAttribute('data-method');\n\n        if (!method) {\n          return;\n        }\n\n        href = Rails.href(link);\n        csrfToken = Rails.csrfToken();\n        csrfParam = Rails.csrfParam();\n        form = document.createElement('form');\n        formContent = \"<input name='_method' value='\" + method + \"' type='hidden' />\";\n\n        if (csrfParam != null && csrfToken != null && !Rails.isCrossDomain(href)) {\n          formContent += \"<input name='\" + csrfParam + \"' value='\" + csrfToken + \"' type='hidden' />\";\n        }\n\n        formContent += '<input type=\"submit\" />';\n        form.method = 'post';\n        form.action = href;\n        form.target = link.target;\n        form.innerHTML = formContent;\n        form.style.display = 'none';\n        document.body.appendChild(form);\n        form.querySelector('[type=\"submit\"]').click();\n        return stopEverything(e);\n      };\n    }).call(this);\n    (function () {\n      var ajax,\n          fire,\n          getData,\n          isCrossDomain,\n          isRemote,\n          matches,\n          serializeElement,\n          setData,\n          stopEverything,\n          slice = [].slice;\n      matches = Rails.matches, getData = Rails.getData, setData = Rails.setData, fire = Rails.fire, stopEverything = Rails.stopEverything, ajax = Rails.ajax, isCrossDomain = Rails.isCrossDomain, serializeElement = Rails.serializeElement;\n\n      isRemote = function (element) {\n        var value;\n        value = element.getAttribute('data-remote');\n        return value != null && value !== 'false';\n      };\n\n      Rails.handleRemote = function (e) {\n        var button, data, dataType, element, method, url, withCredentials;\n        element = this;\n\n        if (!isRemote(element)) {\n          return true;\n        }\n\n        if (!fire(element, 'ajax:before')) {\n          fire(element, 'ajax:stopped');\n          return false;\n        }\n\n        withCredentials = element.getAttribute('data-with-credentials');\n        dataType = element.getAttribute('data-type') || 'script';\n\n        if (matches(element, Rails.formSubmitSelector)) {\n          button = getData(element, 'ujs:submit-button');\n          method = getData(element, 'ujs:submit-button-formmethod') || element.method;\n          url = getData(element, 'ujs:submit-button-formaction') || element.getAttribute('action') || location.href;\n\n          if (method.toUpperCase() === 'GET') {\n            url = url.replace(/\\?.*$/, '');\n          }\n\n          if (element.enctype === 'multipart/form-data') {\n            data = new FormData(element);\n\n            if (button != null) {\n              data.append(button.name, button.value);\n            }\n          } else {\n            data = serializeElement(element, button);\n          }\n\n          setData(element, 'ujs:submit-button', null);\n          setData(element, 'ujs:submit-button-formmethod', null);\n          setData(element, 'ujs:submit-button-formaction', null);\n        } else if (matches(element, Rails.buttonClickSelector) || matches(element, Rails.inputChangeSelector)) {\n          method = element.getAttribute('data-method');\n          url = element.getAttribute('data-url');\n          data = serializeElement(element, element.getAttribute('data-params'));\n        } else {\n          method = element.getAttribute('data-method');\n          url = Rails.href(element);\n          data = element.getAttribute('data-params');\n        }\n\n        ajax({\n          type: method || 'GET',\n          url: url,\n          data: data,\n          dataType: dataType,\n          beforeSend: function (xhr, options) {\n            if (fire(element, 'ajax:beforeSend', [xhr, options])) {\n              return fire(element, 'ajax:send', [xhr]);\n            } else {\n              fire(element, 'ajax:stopped');\n              return false;\n            }\n          },\n          success: function () {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return fire(element, 'ajax:success', args);\n          },\n          error: function () {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return fire(element, 'ajax:error', args);\n          },\n          complete: function () {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return fire(element, 'ajax:complete', args);\n          },\n          crossDomain: isCrossDomain(url),\n          withCredentials: withCredentials != null && withCredentials !== 'false'\n        });\n        return stopEverything(e);\n      };\n\n      Rails.formSubmitButtonClick = function (e) {\n        var button, form;\n        button = this;\n        form = button.form;\n\n        if (!form) {\n          return;\n        }\n\n        if (button.name) {\n          setData(form, 'ujs:submit-button', {\n            name: button.name,\n            value: button.value\n          });\n        }\n\n        setData(form, 'ujs:formnovalidate-button', button.formNoValidate);\n        setData(form, 'ujs:submit-button-formaction', button.getAttribute('formaction'));\n        return setData(form, 'ujs:submit-button-formmethod', button.getAttribute('formmethod'));\n      };\n\n      Rails.preventInsignificantClick = function (e) {\n        var data, insignificantMetaClick, link, metaClick, method, nonPrimaryMouseClick;\n        link = this;\n        method = (link.getAttribute('data-method') || 'GET').toUpperCase();\n        data = link.getAttribute('data-params');\n        metaClick = e.metaKey || e.ctrlKey;\n        insignificantMetaClick = metaClick && method === 'GET' && !data;\n        nonPrimaryMouseClick = e.button != null && e.button !== 0;\n\n        if (nonPrimaryMouseClick || insignificantMetaClick) {\n          return e.stopImmediatePropagation();\n        }\n      };\n    }).call(this);\n    (function () {\n      var $, CSRFProtection, delegate, disableElement, enableElement, fire, formSubmitButtonClick, getData, handleConfirm, handleDisabledElement, handleMethod, handleRemote, loadCSPNonce, preventInsignificantClick, refreshCSRFTokens;\n      fire = Rails.fire, delegate = Rails.delegate, getData = Rails.getData, $ = Rails.$, refreshCSRFTokens = Rails.refreshCSRFTokens, CSRFProtection = Rails.CSRFProtection, loadCSPNonce = Rails.loadCSPNonce, enableElement = Rails.enableElement, disableElement = Rails.disableElement, handleDisabledElement = Rails.handleDisabledElement, handleConfirm = Rails.handleConfirm, preventInsignificantClick = Rails.preventInsignificantClick, handleRemote = Rails.handleRemote, formSubmitButtonClick = Rails.formSubmitButtonClick, handleMethod = Rails.handleMethod;\n\n      if (typeof jQuery !== \"undefined\" && jQuery !== null && jQuery.ajax != null) {\n        if (jQuery.rails) {\n          throw new Error('If you load both jquery_ujs and rails-ujs, use rails-ujs only.');\n        }\n\n        jQuery.rails = Rails;\n        jQuery.ajaxPrefilter(function (options, originalOptions, xhr) {\n          if (!options.crossDomain) {\n            return CSRFProtection(xhr);\n          }\n        });\n      }\n\n      Rails.start = function () {\n        if (window._rails_loaded) {\n          throw new Error('rails-ujs has already been loaded!');\n        }\n\n        window.addEventListener('pageshow', function () {\n          $(Rails.formEnableSelector).forEach(function (el) {\n            if (getData(el, 'ujs:disabled')) {\n              return enableElement(el);\n            }\n          });\n          return $(Rails.linkDisableSelector).forEach(function (el) {\n            if (getData(el, 'ujs:disabled')) {\n              return enableElement(el);\n            }\n          });\n        });\n        delegate(document, Rails.linkDisableSelector, 'ajax:complete', enableElement);\n        delegate(document, Rails.linkDisableSelector, 'ajax:stopped', enableElement);\n        delegate(document, Rails.buttonDisableSelector, 'ajax:complete', enableElement);\n        delegate(document, Rails.buttonDisableSelector, 'ajax:stopped', enableElement);\n        delegate(document, Rails.linkClickSelector, 'click', preventInsignificantClick);\n        delegate(document, Rails.linkClickSelector, 'click', handleDisabledElement);\n        delegate(document, Rails.linkClickSelector, 'click', handleConfirm);\n        delegate(document, Rails.linkClickSelector, 'click', disableElement);\n        delegate(document, Rails.linkClickSelector, 'click', handleRemote);\n        delegate(document, Rails.linkClickSelector, 'click', handleMethod);\n        delegate(document, Rails.buttonClickSelector, 'click', preventInsignificantClick);\n        delegate(document, Rails.buttonClickSelector, 'click', handleDisabledElement);\n        delegate(document, Rails.buttonClickSelector, 'click', handleConfirm);\n        delegate(document, Rails.buttonClickSelector, 'click', disableElement);\n        delegate(document, Rails.buttonClickSelector, 'click', handleRemote);\n        delegate(document, Rails.inputChangeSelector, 'change', handleDisabledElement);\n        delegate(document, Rails.inputChangeSelector, 'change', handleConfirm);\n        delegate(document, Rails.inputChangeSelector, 'change', handleRemote);\n        delegate(document, Rails.formSubmitSelector, 'submit', handleDisabledElement);\n        delegate(document, Rails.formSubmitSelector, 'submit', handleConfirm);\n        delegate(document, Rails.formSubmitSelector, 'submit', handleRemote);\n        delegate(document, Rails.formSubmitSelector, 'submit', function (e) {\n          return setTimeout(function () {\n            return disableElement(e);\n          }, 13);\n        });\n        delegate(document, Rails.formSubmitSelector, 'ajax:send', disableElement);\n        delegate(document, Rails.formSubmitSelector, 'ajax:complete', enableElement);\n        delegate(document, Rails.formInputClickSelector, 'click', preventInsignificantClick);\n        delegate(document, Rails.formInputClickSelector, 'click', handleDisabledElement);\n        delegate(document, Rails.formInputClickSelector, 'click', handleConfirm);\n        delegate(document, Rails.formInputClickSelector, 'click', formSubmitButtonClick);\n        document.addEventListener('DOMContentLoaded', refreshCSRFTokens);\n        document.addEventListener('DOMContentLoaded', loadCSPNonce);\n        return window._rails_loaded = true;\n      };\n\n      if (window.Rails === Rails && fire(document, 'rails:attachBindings')) {\n        Rails.start();\n      }\n    }).call(this);\n  }).call(this);\n\n  if (typeof module === \"object\" && module.exports) {\n    module.exports = Rails;\n  } else if (typeof define === \"function\" && define.amd) {\n    define(Rails);\n  }\n}).call(this);","/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n'use strict';\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        // \"\n        escape = '&quot;';\n        break;\n\n      case 38:\n        // &\n        escape = '&amp;';\n        break;\n\n      case 39:\n        // '\n        escape = '&#39;';\n        break;\n\n      case 60:\n        // <\n        escape = '&lt;';\n        break;\n\n      case 62:\n        // >\n        escape = '&gt;';\n        break;\n\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index ? html + str.substring(lastIndex, index) : html;\n}","// Dynamically set webpack's loading path depending on a meta header, in order\n// to share the same assets regardless of instance configuration.\n// See https://webpack.js.org/guides/public-path/#on-the-fly\n\nfunction removeOuterSlashes(string) {\n  return string.replace(/^\\/*/, '').replace(/\\/*$/, '');\n}\n\nfunction formatPublicPath(host = '', path = '') {\n  let formattedHost = removeOuterSlashes(host);\n  if (formattedHost && !/^http/i.test(formattedHost)) {\n    formattedHost = `//${formattedHost}`;\n  }\n  const formattedPath = removeOuterSlashes(path);\n  return `${formattedHost}/${formattedPath}/`;\n}\n\nconst cdnHost = document.querySelector('meta[name=cdn-host]');\n\n// eslint-disable-next-line camelcase, no-undef, no-unused-vars\n__webpack_public_path__ = formatPublicPath(cdnHost ? cdnHost.content : '', process.env.PUBLIC_OUTPUT_PATH);\n","// A mapping of unicode strings to an object containing the filename\n// (i.e. the svg filename) and a shortCode intended to be shown\n// as a \"title\" attribute in an HTML element (aka tooltip).\n\nconst [\n  shortCodesToEmojiData,\n  skins, // eslint-disable-line no-unused-vars\n  categories, // eslint-disable-line no-unused-vars\n  short_names, // eslint-disable-line no-unused-vars\n  emojisWithoutShortCodes,\n] = require('./emoji_compressed');\nconst { unicodeToFilename } = require('./unicode_to_filename');\n\n// decompress\nconst unicodeMapping = {};\n\nfunction processEmojiMapData(emojiMapData, shortCode) {\n  let [ native, filename ] = emojiMapData;\n  if (!filename) {\n    // filename name can be derived from unicodeToFilename\n    filename = unicodeToFilename(native);\n  }\n  unicodeMapping[native] = {\n    shortCode: shortCode,\n    filename: filename,\n  };\n}\n\nObject.keys(shortCodesToEmojiData).forEach((shortCode) => {\n  let [ filenameData ] = shortCodesToEmojiData[shortCode];\n  filenameData.forEach(emojiMapData => processEmojiMapData(emojiMapData, shortCode));\n});\nemojisWithoutShortCodes.forEach(emojiMapData => processEmojiMapData(emojiMapData));\n\nmodule.exports = unicodeMapping;\n","'use strict';\n\nvar CODA_MARKER = '$$'; // marks the end of the string\n\nfunction MiniTrie(words) {\n  this._dict = {};\n\n  for (var i = 0, len = words.length; i < len; i++) {\n    var word = words[i];\n    var dict = this._dict;\n\n    for (var j = 0, len2 = word.length; j < len2; j++) {\n      var char = word.charAt(j);\n      dict = dict[char] = dict[char] || {};\n    }\n\n    dict[CODA_MARKER] = true;\n  }\n}\n\nMiniTrie.prototype.search = function (str) {\n  var i = -1;\n  var len = str.length;\n  var stack = [this._dict];\n\n  while (++i < len) {\n    var dict = stack[i];\n    var char = str.charAt(i);\n\n    if (char in dict) {\n      stack.push(dict[char]);\n    } else {\n      break;\n    }\n  }\n\n  while (stack.length) {\n    if (stack.pop()[CODA_MARKER]) {\n      return str.substring(0, stack.length);\n    }\n  }\n};\n\nmodule.exports = MiniTrie;","import ready from '../ready';\n\nexport let assetHost = '';\n\nready(() => {\n  const cdnHost = document.querySelector('meta[name=cdn-host]');\n  if (cdnHost) {\n    assetHost = cdnHost.content || '';\n  }\n});\n","//  This file will be loaded on settings pages, regardless of theme.\n\nimport 'packs/public-path';\nimport escapeTextContentForBrowser from 'escape-html';\nconst { delegate } = require('@rails/ujs');\nimport emojify from '../mastodon/features/emoji/emoji';\n\ndelegate(document, '#account_display_name', 'input', ({ target }) => {\n  const name = document.querySelector('.card .display-name strong');\n  if (name) {\n    if (target.value) {\n      name.innerHTML = emojify(escapeTextContentForBrowser(target.value));\n    } else {\n      name.textContent = name.textContent = target.dataset.default;\n    }\n  }\n});\n\ndelegate(document, '#account_avatar', 'change', ({ target }) => {\n  const avatar = document.querySelector('.card .avatar img');\n  const [file] = target.files || [];\n  const url = file ? URL.createObjectURL(file) : avatar.dataset.originalSrc;\n\n  avatar.src = url;\n});\n\ndelegate(document, '#account_header', 'change', ({ target }) => {\n  const header = document.querySelector('.card .card__img img');\n  const [file] = target.files || [];\n  const url = file ? URL.createObjectURL(file) : header.dataset.originalSrc;\n\n  header.src = url;\n});\n\ndelegate(document, '#account_locked', 'change', ({ target }) => {\n  const lock = document.querySelector('.card .display-name i');\n\n  if (lock) {\n    if (target.checked) {\n      delete lock.dataset.hidden;\n    } else {\n      lock.dataset.hidden = 'true';\n    }\n  }\n});\n\ndelegate(document, '.input-copy input', 'click', ({ target }) => {\n  target.focus();\n  target.select();\n  target.setSelectionRange(0, target.value.length);\n});\n\ndelegate(document, '.input-copy button', 'click', ({ target }) => {\n  const input = target.parentNode.querySelector('.input-copy__wrapper input');\n\n  const oldReadOnly = input.readonly;\n\n  input.readonly = false;\n  input.focus();\n  input.select();\n  input.setSelectionRange(0, input.value.length);\n\n  try {\n    if (document.execCommand('copy')) {\n      input.blur();\n      target.parentNode.classList.add('copied');\n\n    setTimeout(() => {\n        target.parentNode.classList.remove('copied');\n      }, 700);\n    }\n  } catch (err) {\n    console.error(err);\n  }\n\n  input.readonly = oldReadOnly;\n});\n"],"sourceRoot":""}