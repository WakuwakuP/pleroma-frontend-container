{"version":3,"sources":["webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/components/report.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/components/follow_request.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/containers/follow_request_container.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/components/notification.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/containers/notification_container.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/components/clear_column_button.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/components/grant_permission_button.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/components/column_settings.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/containers/column_settings_container.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/components/filter_bar.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/containers/filter_bar_container.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/components/notifications_permission_banner.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/features/notifications/index.js"],"names":["messages","defineMessages","openReport","other","spam","violation","Report","injectIntl","ImmutablePureComponent","render","intl","hidden","report","account","this","props","get","className","friend","timestamp","short","id","defaultMessage","values","count","size","formatMessage","href","target","rel","propTypes","ImmutablePropTypes","map","isRequired","PropTypes","bool","object","authorize","reject","FollowRequest","onAuthorize","onReject","title","to","icon","onClick","func","connect","getAccount","makeGetAccount","state","dispatch","authorizeFollowRequest","rejectFollowRequest","favourite","follow","ownPoll","poll","reblog","status","update","adminSignUp","adminReport","notificationForScreenReader","message","output","push","formatDate","hour","minute","month","day","join","Notification","handleMoveUp","notification","onMoveUp","handleMoveDown","onMoveDown","handleOpen","context","router","history","getIn","handleOpenProfile","handleMention","e","preventDefault","onMention","handleHotkeyFavourite","onFavourite","handleHotkeyBoost","onReblog","handleHotkeyToggleHidden","onToggleHidden","getHandlers","reply","boost","mention","open","openProfile","moveUp","moveDown","toggleHidden","renderFollow","link","unread","handlers","classNames","tabIndex","aria-label","name","fixedWidth","renderFollowRequest","withNote","renderMention","withDismiss","contextType","getScrollPosition","updateScrollBottom","cachedMediaWidth","cacheMediaWidth","renderFavourite","muted","renderReblog","renderStatus","renderUpdate","renderPoll","me","renderAdminSignUp","renderAdminReport","targetAccount","targetDisplayNameHtml","__html","targetLink","dangerouslySetInnerHTML","displayNameHtml","contextTypes","number","getNotification","makeGetNotification","getStatus","makeGetStatus","getReport","makeGetReport","accountId","mentionCompose","onModalReblog","privacy","unreblog","shiftKey","boostModal","initBoostModal","unfavourite","revealStatus","hideStatus","ClearColumnButton","React","PureComponent","GrantPermissionButton","ColumnSettings","onPushChange","path","checked","onChange","settings","pushSettings","onClear","alertsEnabled","browserSupport","browserPermission","onRequestNotificationPermission","unreadMarkersShowStr","filterBarShowStr","filterAdvancedStr","alertStr","showStr","soundStr","showPushSettings","pushStr","role","aria-labelledby","prefix","settingPath","label","disabled","identity","permissions","PERMISSION_MANAGE_USERS","PERMISSION_MANAGE_REPORTS","clearMessage","clearConfirm","permissionDenied","includes","window","permission","requestBrowserPermission","changePushNotifications","slice","showAlert","undefined","changeSetting","setFilter","openModal","confirm","onConfirm","clearNotifications","tooltips","mentions","favourites","boosts","polls","follows","statuses","FilterBar","notificationType","selectFilter","selectedFilter","advancedMode","newActiveFilter","close","NotificationsPermissionBanner","handleClick","handleClose","markAsRead","getExcludedTypes","createSelector","shows","ImmutableList","filter","item","keys","getNotifications","showFilterBar","allowedType","excludedTypes","notifications","filterNot","Notifications","isLoading","isUnread","hasMore","numPending","lastReadId","canMarkAsRead","some","compareId","needsNotificationPermission","handleLoadGap","maxId","expandNotifications","handleLoadOlder","last","leading","handleLoadPending","loadPending","handleScrollToTop","scrollTopNotifications","handleScroll","handlePin","columnId","removeColumn","addColumn","handleMove","dir","moveColumn","handleHeaderClick","column","scrollTop","setColumnRef","c","elementIndex","findIndex","_selectChild","handleMarkAsRead","markNotificationsAsRead","submitMarkers","immediate","componentWillMount","mountNotifications","componentWillUnmount","cancel","unmountNotifications","index","align_top","container","node","element","querySelector","offsetTop","scrollIntoView","clientHeight","offsetHeight","focus","multiColumn","pinned","emptyMessage","scrollableContent","filterBarContainer","scrollContainer","scrollKey","trackScroll","showLoading","prepend","alwaysPrepend","onLoadMore","onLoadPending","onScrollToTop","onScroll","bindToDocument","extraButton","ref","active","onPin","onMove","defaultProps"],"mappings":"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","file":"js/features/notifications-c684e32a86d67423b707.chunk.js","sourcesContent":["import React, { Fragment } from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport AvatarOverlay from 'mastodon/components/avatar_overlay';\nimport RelativeTimestamp from 'mastodon/components/relative_timestamp';\n\nconst messages = defineMessages({\n  openReport: { id: 'report_notification.open', defaultMessage: 'Open report' },\n  other: { id: 'report_notification.categories.other', defaultMessage: 'Other' },\n  spam: { id: 'report_notification.categories.spam', defaultMessage: 'Spam' },\n  violation: { id: 'report_notification.categories.violation', defaultMessage: 'Rule violation' },\n});\n\nexport default @injectIntl\nclass Report extends ImmutablePureComponent {\n\n  static propTypes = {\n    account: ImmutablePropTypes.map.isRequired,\n    report: ImmutablePropTypes.map.isRequired,\n    hidden: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { intl, hidden, report, account } = this.props;\n\n    if (!report) {\n      return null;\n    }\n\n    if (hidden) {\n      return (\n        <Fragment>\n          {report.get('id')}\n        </Fragment>\n      );\n    }\n\n    return (\n      <div className='notification__report'>\n        <div className='notification__report__avatar'>\n          <AvatarOverlay account={report.get('target_account')} friend={account} />\n        </div>\n\n        <div className='notification__report__details'>\n          <div>\n            <RelativeTimestamp timestamp={report.get('created_at')} short={false} /> Â· <FormattedMessage id='report_notification.attached_statuses' defaultMessage='{count, plural, one {{count} post} other {{count} posts}} attached' values={{ count: report.get('status_ids').size }} />\n            <br />\n            <strong>{intl.formatMessage(messages[report.get('category')])}</strong>\n          </div>\n\n          <div className='notification__report__actions'>\n            <a href={`/admin/reports/${report.get('id')}`} className='button' target='_blank' rel='noopener noreferrer'>{intl.formatMessage(messages.openReport)}</a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React, { Fragment } from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport Avatar from 'mastodon/components/avatar';\nimport DisplayName from 'mastodon/components/display_name';\nimport Permalink from 'mastodon/components/permalink';\nimport IconButton from 'mastodon/components/icon_button';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nconst messages = defineMessages({\n  authorize: { id: 'follow_request.authorize', defaultMessage: 'Authorize' },\n  reject: { id: 'follow_request.reject', defaultMessage: 'Reject' },\n});\n\nexport default @injectIntl\nclass FollowRequest extends ImmutablePureComponent {\n\n  static propTypes = {\n    account: ImmutablePropTypes.map.isRequired,\n    onAuthorize: PropTypes.func.isRequired,\n    onReject: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { intl, hidden, account, onAuthorize, onReject } = this.props;\n\n    if (!account) {\n      return <div />;\n    }\n\n    if (hidden) {\n      return (\n        <Fragment>\n          {account.get('display_name')}\n          {account.get('username')}\n        </Fragment>\n      );\n    }\n\n    return (\n      <div className='account'>\n        <div className='account__wrapper'>\n          <Permalink key={account.get('id')} className='account__display-name' title={account.get('acct')} href={account.get('url')} to={`/@${account.get('acct')}`}>\n            <div className='account__avatar-wrapper'><Avatar account={account} size={36} /></div>\n            <DisplayName account={account} />\n          </Permalink>\n\n          <div className='account__relationship'>\n            <IconButton title={intl.formatMessage(messages.authorize)} icon='check' onClick={onAuthorize} />\n            <IconButton title={intl.formatMessage(messages.reject)} icon='times' onClick={onReject} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport { makeGetAccount } from 'mastodon/selectors';\nimport FollowRequest from '../components/follow_request';\nimport { authorizeFollowRequest, rejectFollowRequest } from 'mastodon/actions/accounts';\n\nconst makeMapStateToProps = () => {\n  const getAccount = makeGetAccount();\n\n  const mapStateToProps = (state, props) => ({\n    account: getAccount(state, props.id),\n  });\n\n  return mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch, { id }) => ({\n  onAuthorize () {\n    dispatch(authorizeFollowRequest(id));\n  },\n\n  onReject () {\n    dispatch(rejectFollowRequest(id));\n  },\n});\n\nexport default connect(makeMapStateToProps, mapDispatchToProps)(FollowRequest);\n","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { injectIntl, FormattedMessage, defineMessages } from 'react-intl';\nimport { HotKeys } from 'react-hotkeys';\nimport PropTypes from 'prop-types';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { me } from 'mastodon/initial_state';\nimport StatusContainer from 'mastodon/containers/status_container';\nimport AccountContainer from 'mastodon/containers/account_container';\nimport Report from './report';\nimport FollowRequestContainer from '../containers/follow_request_container';\nimport Icon from 'mastodon/components/icon';\nimport Permalink from 'mastodon/components/permalink';\nimport classNames from 'classnames';\n\nconst messages = defineMessages({\n  favourite: { id: 'notification.favourite', defaultMessage: '{name} favourited your status' },\n  follow: { id: 'notification.follow', defaultMessage: '{name} followed you' },\n  ownPoll: { id: 'notification.own_poll', defaultMessage: 'Your poll has ended' },\n  poll: { id: 'notification.poll', defaultMessage: 'A poll you have voted in has ended' },\n  reblog: { id: 'notification.reblog', defaultMessage: '{name} boosted your status' },\n  status: { id: 'notification.status', defaultMessage: '{name} just posted' },\n  update: { id: 'notification.update', defaultMessage: '{name} edited a post' },\n  adminSignUp: { id: 'notification.admin.sign_up', defaultMessage: '{name} signed up' },\n  adminReport: { id: 'notification.admin.report', defaultMessage: '{name} reported {target}' },\n});\n\nconst notificationForScreenReader = (intl, message, timestamp) => {\n  const output = [message];\n\n  output.push(intl.formatDate(timestamp, { hour: '2-digit', minute: '2-digit', month: 'short', day: 'numeric' }));\n\n  return output.join(', ');\n};\n\nexport default @injectIntl\nclass Notification extends ImmutablePureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  static propTypes = {\n    notification: ImmutablePropTypes.map.isRequired,\n    hidden: PropTypes.bool,\n    onMoveUp: PropTypes.func.isRequired,\n    onMoveDown: PropTypes.func.isRequired,\n    onMention: PropTypes.func.isRequired,\n    onFavourite: PropTypes.func.isRequired,\n    onReblog: PropTypes.func.isRequired,\n    onToggleHidden: PropTypes.func.isRequired,\n    status: ImmutablePropTypes.map,\n    intl: PropTypes.object.isRequired,\n    getScrollPosition: PropTypes.func,\n    updateScrollBottom: PropTypes.func,\n    cacheMediaWidth: PropTypes.func,\n    cachedMediaWidth: PropTypes.number,\n    unread: PropTypes.bool,\n  };\n\n  handleMoveUp = () => {\n    const { notification, onMoveUp } = this.props;\n    onMoveUp(notification.get('id'));\n  }\n\n  handleMoveDown = () => {\n    const { notification, onMoveDown } = this.props;\n    onMoveDown(notification.get('id'));\n  }\n\n  handleOpen = () => {\n    const { notification } = this.props;\n\n    if (notification.get('status')) {\n      this.context.router.history.push(`/@${notification.getIn(['status', 'account', 'acct'])}/${notification.get('status')}`);\n    } else {\n      this.handleOpenProfile();\n    }\n  }\n\n  handleOpenProfile = () => {\n    const { notification } = this.props;\n    this.context.router.history.push(`/@${notification.getIn(['account', 'acct'])}`);\n  }\n\n  handleMention = e => {\n    e.preventDefault();\n\n    const { notification, onMention } = this.props;\n    onMention(notification.get('account'), this.context.router.history);\n  }\n\n  handleHotkeyFavourite = () => {\n    const { status } = this.props;\n    if (status) this.props.onFavourite(status);\n  }\n\n  handleHotkeyBoost = e => {\n    const { status } = this.props;\n    if (status) this.props.onReblog(status, e);\n  }\n\n  handleHotkeyToggleHidden = () => {\n    const { status } = this.props;\n    if (status) this.props.onToggleHidden(status);\n  }\n\n  getHandlers () {\n    return {\n      reply: this.handleMention,\n      favourite: this.handleHotkeyFavourite,\n      boost: this.handleHotkeyBoost,\n      mention: this.handleMention,\n      open: this.handleOpen,\n      openProfile: this.handleOpenProfile,\n      moveUp: this.handleMoveUp,\n      moveDown: this.handleMoveDown,\n      toggleHidden: this.handleHotkeyToggleHidden,\n    };\n  }\n\n  renderFollow (notification, account, link) {\n    const { intl, unread } = this.props;\n\n    return (\n      <HotKeys handlers={this.getHandlers()}>\n        <div className={classNames('notification notification-follow focusable', { unread })} tabIndex='0' aria-label={notificationForScreenReader(intl, intl.formatMessage(messages.follow, { name: account.get('acct') }), notification.get('created_at'))}>\n          <div className='notification__message'>\n            <div className='notification__favourite-icon-wrapper'>\n              <Icon id='user-plus' fixedWidth />\n            </div>\n\n            <span title={notification.get('created_at')}>\n              <FormattedMessage id='notification.follow' defaultMessage='{name} followed you' values={{ name: link }} />\n            </span>\n          </div>\n\n          <AccountContainer id={account.get('id')} hidden={this.props.hidden} />\n        </div>\n      </HotKeys>\n    );\n  }\n\n  renderFollowRequest (notification, account, link) {\n    const { intl, unread } = this.props;\n\n    return (\n      <HotKeys handlers={this.getHandlers()}>\n        <div className={classNames('notification notification-follow-request focusable', { unread })} tabIndex='0' aria-label={notificationForScreenReader(intl, intl.formatMessage({ id: 'notification.follow_request', defaultMessage: '{name} has requested to follow you' }, { name: account.get('acct') }), notification.get('created_at'))}>\n          <div className='notification__message'>\n            <div className='notification__favourite-icon-wrapper'>\n              <Icon id='user' fixedWidth />\n            </div>\n\n            <span title={notification.get('created_at')}>\n              <FormattedMessage id='notification.follow_request' defaultMessage='{name} has requested to follow you' values={{ name: link }} />\n            </span>\n          </div>\n\n          <FollowRequestContainer id={account.get('id')} withNote={false} hidden={this.props.hidden} />\n        </div>\n      </HotKeys>\n    );\n  }\n\n  renderMention (notification) {\n    return (\n      <StatusContainer\n        id={notification.get('status')}\n        withDismiss\n        hidden={this.props.hidden}\n        onMoveDown={this.handleMoveDown}\n        onMoveUp={this.handleMoveUp}\n        contextType='notifications'\n        getScrollPosition={this.props.getScrollPosition}\n        updateScrollBottom={this.props.updateScrollBottom}\n        cachedMediaWidth={this.props.cachedMediaWidth}\n        cacheMediaWidth={this.props.cacheMediaWidth}\n        unread={this.props.unread}\n      />\n    );\n  }\n\n  renderFavourite (notification, link) {\n    const { intl, unread } = this.props;\n\n    return (\n      <HotKeys handlers={this.getHandlers()}>\n        <div className={classNames('notification notification-favourite focusable', { unread })} tabIndex='0' aria-label={notificationForScreenReader(intl, intl.formatMessage(messages.favourite, { name: notification.getIn(['account', 'acct']) }), notification.get('created_at'))}>\n          <div className='notification__message'>\n            <div className='notification__favourite-icon-wrapper'>\n              <Icon id='star' className='star-icon' fixedWidth />\n            </div>\n\n            <span title={notification.get('created_at')}>\n              <FormattedMessage id='notification.favourite' defaultMessage='{name} favourited your status' values={{ name: link }} />\n            </span>\n          </div>\n\n          <StatusContainer\n            id={notification.get('status')}\n            account={notification.get('account')}\n            muted\n            withDismiss\n            hidden={!!this.props.hidden}\n            getScrollPosition={this.props.getScrollPosition}\n            updateScrollBottom={this.props.updateScrollBottom}\n            cachedMediaWidth={this.props.cachedMediaWidth}\n            cacheMediaWidth={this.props.cacheMediaWidth}\n          />\n        </div>\n      </HotKeys>\n    );\n  }\n\n  renderReblog (notification, link) {\n    const { intl, unread } = this.props;\n\n    return (\n      <HotKeys handlers={this.getHandlers()}>\n        <div className={classNames('notification notification-reblog focusable', { unread })} tabIndex='0' aria-label={notificationForScreenReader(intl, intl.formatMessage(messages.reblog, { name: notification.getIn(['account', 'acct']) }), notification.get('created_at'))}>\n          <div className='notification__message'>\n            <div className='notification__favourite-icon-wrapper'>\n              <Icon id='retweet' fixedWidth />\n            </div>\n\n            <span title={notification.get('created_at')}>\n              <FormattedMessage id='notification.reblog' defaultMessage='{name} boosted your status' values={{ name: link }} />\n            </span>\n          </div>\n\n          <StatusContainer\n            id={notification.get('status')}\n            account={notification.get('account')}\n            muted\n            withDismiss\n            hidden={this.props.hidden}\n            getScrollPosition={this.props.getScrollPosition}\n            updateScrollBottom={this.props.updateScrollBottom}\n            cachedMediaWidth={this.props.cachedMediaWidth}\n            cacheMediaWidth={this.props.cacheMediaWidth}\n          />\n        </div>\n      </HotKeys>\n    );\n  }\n\n  renderStatus (notification, link) {\n    const { intl, unread } = this.props;\n\n    return (\n      <HotKeys handlers={this.getHandlers()}>\n        <div className={classNames('notification notification-status focusable', { unread })} tabIndex='0' aria-label={notificationForScreenReader(intl, intl.formatMessage(messages.status, { name: notification.getIn(['account', 'acct']) }), notification.get('created_at'))}>\n          <div className='notification__message'>\n            <div className='notification__favourite-icon-wrapper'>\n              <Icon id='home' fixedWidth />\n            </div>\n\n            <span title={notification.get('created_at')}>\n              <FormattedMessage id='notification.status' defaultMessage='{name} just posted' values={{ name: link }} />\n            </span>\n          </div>\n\n          <StatusContainer\n            id={notification.get('status')}\n            account={notification.get('account')}\n            muted\n            withDismiss\n            hidden={this.props.hidden}\n            getScrollPosition={this.props.getScrollPosition}\n            updateScrollBottom={this.props.updateScrollBottom}\n            cachedMediaWidth={this.props.cachedMediaWidth}\n            cacheMediaWidth={this.props.cacheMediaWidth}\n          />\n        </div>\n      </HotKeys>\n    );\n  }\n\n  renderUpdate (notification, link) {\n    const { intl, unread } = this.props;\n\n    return (\n      <HotKeys handlers={this.getHandlers()}>\n        <div className={classNames('notification notification-update focusable', { unread })} tabIndex='0' aria-label={notificationForScreenReader(intl, intl.formatMessage(messages.update, { name: notification.getIn(['account', 'acct']) }), notification.get('created_at'))}>\n          <div className='notification__message'>\n            <div className='notification__favourite-icon-wrapper'>\n              <Icon id='pencil' fixedWidth />\n            </div>\n\n            <span title={notification.get('created_at')}>\n              <FormattedMessage id='notification.update' defaultMessage='{name} edited a post' values={{ name: link }} />\n            </span>\n          </div>\n\n          <StatusContainer\n            id={notification.get('status')}\n            account={notification.get('account')}\n            muted\n            withDismiss\n            hidden={this.props.hidden}\n            getScrollPosition={this.props.getScrollPosition}\n            updateScrollBottom={this.props.updateScrollBottom}\n            cachedMediaWidth={this.props.cachedMediaWidth}\n            cacheMediaWidth={this.props.cacheMediaWidth}\n          />\n        </div>\n      </HotKeys>\n    );\n  }\n\n  renderPoll (notification, account) {\n    const { intl, unread } = this.props;\n    const ownPoll  = me === account.get('id');\n    const message  = ownPoll ? intl.formatMessage(messages.ownPoll) : intl.formatMessage(messages.poll);\n\n    return (\n      <HotKeys handlers={this.getHandlers()}>\n        <div className={classNames('notification notification-poll focusable', { unread })} tabIndex='0' aria-label={notificationForScreenReader(intl, message, notification.get('created_at'))}>\n          <div className='notification__message'>\n            <div className='notification__favourite-icon-wrapper'>\n              <Icon id='tasks' fixedWidth />\n            </div>\n\n            <span title={notification.get('created_at')}>\n              {ownPoll ? (\n                <FormattedMessage id='notification.own_poll' defaultMessage='Your poll has ended' />\n              ) : (\n                <FormattedMessage id='notification.poll' defaultMessage='A poll you have voted in has ended' />\n              )}\n            </span>\n          </div>\n\n          <StatusContainer\n            id={notification.get('status')}\n            account={account}\n            muted\n            withDismiss\n            hidden={this.props.hidden}\n            getScrollPosition={this.props.getScrollPosition}\n            updateScrollBottom={this.props.updateScrollBottom}\n            cachedMediaWidth={this.props.cachedMediaWidth}\n            cacheMediaWidth={this.props.cacheMediaWidth}\n          />\n        </div>\n      </HotKeys>\n    );\n  }\n\n  renderAdminSignUp (notification, account, link) {\n    const { intl, unread } = this.props;\n\n    return (\n      <HotKeys handlers={this.getHandlers()}>\n        <div className={classNames('notification notification-admin-sign-up focusable', { unread })} tabIndex='0' aria-label={notificationForScreenReader(intl, intl.formatMessage(messages.adminSignUp, { name: account.get('acct') }), notification.get('created_at'))}>\n          <div className='notification__message'>\n            <div className='notification__favourite-icon-wrapper'>\n              <Icon id='user-plus' fixedWidth />\n            </div>\n\n            <span title={notification.get('created_at')}>\n              <FormattedMessage id='notification.admin.sign_up' defaultMessage='{name} signed up' values={{ name: link }} />\n            </span>\n          </div>\n\n          <AccountContainer id={account.get('id')} hidden={this.props.hidden} />\n        </div>\n      </HotKeys>\n    );\n  }\n\n  renderAdminReport (notification, account, link) {\n    const { intl, unread, report } = this.props;\n\n    const targetAccount = report.get('target_account');\n    const targetDisplayNameHtml = { __html: targetAccount.get('display_name_html') };\n    const targetLink = <bdi><Permalink className='notification__display-name' href={targetAccount.get('url')} title={targetAccount.get('acct')} to={`/@${targetAccount.get('acct')}`} dangerouslySetInnerHTML={targetDisplayNameHtml} /></bdi>;\n\n    return (\n      <HotKeys handlers={this.getHandlers()}>\n        <div className={classNames('notification notification-admin-report focusable', { unread })} tabIndex='0' aria-label={notificationForScreenReader(intl, intl.formatMessage(messages.adminReport, { name: account.get('acct'), target: notification.getIn(['report', 'target_account', 'acct']) }), notification.get('created_at'))}>\n          <div className='notification__message'>\n            <div className='notification__favourite-icon-wrapper'>\n              <Icon id='flag' fixedWidth />\n            </div>\n\n            <span title={notification.get('created_at')}>\n              <FormattedMessage id='notification.admin.report' defaultMessage='{name} reported {target}' values={{ name: link, target: targetLink }} />\n            </span>\n          </div>\n\n          <Report account={account} report={notification.get('report')} hidden={this.props.hidden} />\n        </div>\n      </HotKeys>\n    );\n  }\n\n  render () {\n    const { notification } = this.props;\n    const account          = notification.get('account');\n    const displayNameHtml  = { __html: account.get('display_name_html') };\n    const link             = <bdi><Permalink className='notification__display-name' href={account.get('url')} title={account.get('acct')} to={`/@${account.get('acct')}`} dangerouslySetInnerHTML={displayNameHtml} /></bdi>;\n\n    switch(notification.get('type')) {\n    case 'follow':\n      return this.renderFollow(notification, account, link);\n    case 'follow_request':\n      return this.renderFollowRequest(notification, account, link);\n    case 'mention':\n      return this.renderMention(notification);\n    case 'favourite':\n      return this.renderFavourite(notification, link);\n    case 'reblog':\n      return this.renderReblog(notification, link);\n    case 'status':\n      return this.renderStatus(notification, link);\n    case 'update':\n      return this.renderUpdate(notification, link);\n    case 'poll':\n      return this.renderPoll(notification, account);\n    case 'admin.sign_up':\n      return this.renderAdminSignUp(notification, account, link);\n    case 'admin.report':\n      return this.renderAdminReport(notification, account, link);\n    }\n\n    return null;\n  }\n\n}\n","import { connect } from 'react-redux';\nimport { makeGetNotification, makeGetStatus, makeGetReport } from '../../../selectors';\nimport Notification from '../components/notification';\nimport { initBoostModal } from '../../../actions/boosts';\nimport { mentionCompose } from '../../../actions/compose';\nimport {\n  reblog,\n  favourite,\n  unreblog,\n  unfavourite,\n} from '../../../actions/interactions';\nimport {\n  hideStatus,\n  revealStatus,\n} from '../../../actions/statuses';\nimport { boostModal } from '../../../initial_state';\n\nconst makeMapStateToProps = () => {\n  const getNotification = makeGetNotification();\n  const getStatus = makeGetStatus();\n  const getReport = makeGetReport();\n\n  const mapStateToProps = (state, props) => {\n    const notification = getNotification(state, props.notification, props.accountId);\n    return {\n      notification: notification,\n      status: notification.get('status') ? getStatus(state, { id: notification.get('status') }) : null,\n      report: notification.get('report') ? getReport(state, notification.get('report'), notification.getIn(['report', 'target_account', 'id'])) : null,\n    };\n  };\n\n  return mapStateToProps;\n};\n\nconst mapDispatchToProps = dispatch => ({\n  onMention: (account, router) => {\n    dispatch(mentionCompose(account, router));\n  },\n\n  onModalReblog (status, privacy) {\n    dispatch(reblog(status, privacy));\n  },\n\n  onReblog (status, e) {\n    if (status.get('reblogged')) {\n      dispatch(unreblog(status));\n    } else {\n      if (e.shiftKey || !boostModal) {\n        this.onModalReblog(status);\n      } else {\n        dispatch(initBoostModal({ status, onReblog: this.onModalReblog }));\n      }\n    }\n  },\n\n  onFavourite (status) {\n    if (status.get('favourited')) {\n      dispatch(unfavourite(status));\n    } else {\n      dispatch(favourite(status));\n    }\n  },\n\n  onToggleHidden (status) {\n    if (status.get('hidden')) {\n      dispatch(revealStatus(status.get('id')));\n    } else {\n      dispatch(hideStatus(status.get('id')));\n    }\n  },\n});\n\nexport default connect(makeMapStateToProps, mapDispatchToProps)(Notification);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport Icon from 'mastodon/components/icon';\n\nexport default class ClearColumnButton extends React.PureComponent {\n\n  static propTypes = {\n    onClick: PropTypes.func.isRequired,\n  };\n\n  render () {\n    return (\n      <button className='text-btn column-header__setting-btn' tabIndex='0' onClick={this.props.onClick}><Icon id='eraser' /> <FormattedMessage id='notifications.clear' defaultMessage='Clear notifications' /></button>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nexport default class GrantPermissionButton extends React.PureComponent {\n\n  static propTypes = {\n    onClick: PropTypes.func.isRequired,\n  };\n\n  render () {\n    return (\n      <button className='text-btn column-header__permission-btn' tabIndex='0' onClick={this.props.onClick}>\n        <FormattedMessage id='notifications.grant_permission' defaultMessage='Grant permission.' />\n      </button>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { FormattedMessage } from 'react-intl';\nimport ClearColumnButton from './clear_column_button';\nimport GrantPermissionButton from './grant_permission_button';\nimport SettingToggle from './setting_toggle';\nimport { PERMISSION_MANAGE_USERS, PERMISSION_MANAGE_REPORTS } from 'mastodon/permissions';\n\nexport default class ColumnSettings extends React.PureComponent {\n\n  static contextTypes = {\n    identity: PropTypes.object,\n  };\n\n  static propTypes = {\n    settings: ImmutablePropTypes.map.isRequired,\n    pushSettings: ImmutablePropTypes.map.isRequired,\n    onChange: PropTypes.func.isRequired,\n    onClear: PropTypes.func.isRequired,\n    onRequestNotificationPermission: PropTypes.func,\n    alertsEnabled: PropTypes.bool,\n    browserSupport: PropTypes.bool,\n    browserPermission: PropTypes.bool,\n  };\n\n  onPushChange = (path, checked) => {\n    this.props.onChange(['push', ...path], checked);\n  }\n\n  render () {\n    const { settings, pushSettings, onChange, onClear, alertsEnabled, browserSupport, browserPermission, onRequestNotificationPermission } = this.props;\n\n    const unreadMarkersShowStr = <FormattedMessage id='notifications.column_settings.unread_notifications.highlight' defaultMessage='Highlight unread notifications' />;\n    const filterBarShowStr = <FormattedMessage id='notifications.column_settings.filter_bar.show_bar' defaultMessage='Show filter bar' />;\n    const filterAdvancedStr = <FormattedMessage id='notifications.column_settings.filter_bar.advanced' defaultMessage='Display all categories' />;\n    const alertStr = <FormattedMessage id='notifications.column_settings.alert' defaultMessage='Desktop notifications' />;\n    const showStr = <FormattedMessage id='notifications.column_settings.show' defaultMessage='Show in column' />;\n    const soundStr = <FormattedMessage id='notifications.column_settings.sound' defaultMessage='Play sound' />;\n\n    const showPushSettings = pushSettings.get('browserSupport') && pushSettings.get('isSubscribed');\n    const pushStr = showPushSettings && <FormattedMessage id='notifications.column_settings.push' defaultMessage='Push notifications' />;\n\n    return (\n      <div>\n        {alertsEnabled && browserSupport && browserPermission === 'denied' && (\n          <div className='column-settings__row column-settings__row--with-margin'>\n            <span className='warning-hint'><FormattedMessage id='notifications.permission_denied' defaultMessage='Desktop notifications are unavailable due to previously denied browser permissions request' /></span>\n          </div>\n        )}\n\n        {alertsEnabled && browserSupport && browserPermission === 'default' && (\n          <div className='column-settings__row column-settings__row--with-margin'>\n            <span className='warning-hint'>\n              <FormattedMessage id='notifications.permission_required' defaultMessage='Desktop notifications are unavailable because the required permission has not been granted.' /> <GrantPermissionButton onClick={onRequestNotificationPermission} />\n            </span>\n          </div>\n        )}\n\n        <div className='column-settings__row'>\n          <ClearColumnButton onClick={onClear} />\n        </div>\n\n        <div role='group' aria-labelledby='notifications-unread-markers'>\n          <span id='notifications-unread-markers' className='column-settings__section'>\n            <FormattedMessage id='notifications.column_settings.unread_notifications.category' defaultMessage='Unread notifications' />\n          </span>\n\n          <div className='column-settings__row'>\n            <SettingToggle id='unread-notification-markers' prefix='notifications' settings={settings} settingPath={['showUnread']} onChange={onChange} label={unreadMarkersShowStr} />\n          </div>\n        </div>\n\n        <div role='group' aria-labelledby='notifications-filter-bar'>\n          <span id='notifications-filter-bar' className='column-settings__section'>\n            <FormattedMessage id='notifications.column_settings.filter_bar.category' defaultMessage='Quick filter bar' />\n          </span>\n\n          <div className='column-settings__row'>\n            <SettingToggle id='show-filter-bar' prefix='notifications' settings={settings} settingPath={['quickFilter', 'show']} onChange={onChange} label={filterBarShowStr} />\n            <SettingToggle id='show-filter-bar' prefix='notifications' settings={settings} settingPath={['quickFilter', 'advanced']} onChange={onChange} label={filterAdvancedStr} />\n          </div>\n        </div>\n\n        <div role='group' aria-labelledby='notifications-follow'>\n          <span id='notifications-follow' className='column-settings__section'><FormattedMessage id='notifications.column_settings.follow' defaultMessage='New followers:' /></span>\n\n          <div className='column-settings__row'>\n            <SettingToggle disabled={browserPermission === 'denied'} prefix='notifications_desktop' settings={settings} settingPath={['alerts', 'follow']} onChange={onChange} label={alertStr} />\n            {showPushSettings && <SettingToggle prefix='notifications_push' settings={pushSettings} settingPath={['alerts', 'follow']} onChange={this.onPushChange} label={pushStr} />}\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['shows', 'follow']} onChange={onChange} label={showStr} />\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['sounds', 'follow']} onChange={onChange} label={soundStr} />\n          </div>\n        </div>\n\n        <div role='group' aria-labelledby='notifications-follow-request'>\n          <span id='notifications-follow-request' className='column-settings__section'><FormattedMessage id='notifications.column_settings.follow_request' defaultMessage='New follow requests:' /></span>\n\n          <div className='column-settings__row'>\n            <SettingToggle disabled={browserPermission === 'denied'} prefix='notifications_desktop' settings={settings} settingPath={['alerts', 'follow_request']} onChange={onChange} label={alertStr} />\n            {showPushSettings && <SettingToggle prefix='notifications_push' settings={pushSettings} settingPath={['alerts', 'follow_request']} onChange={this.onPushChange} label={pushStr} />}\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['shows', 'follow_request']} onChange={onChange} label={showStr} />\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['sounds', 'follow_request']} onChange={onChange} label={soundStr} />\n          </div>\n        </div>\n\n        <div role='group' aria-labelledby='notifications-favourite'>\n          <span id='notifications-favourite' className='column-settings__section'><FormattedMessage id='notifications.column_settings.favourite' defaultMessage='Favourites:' /></span>\n\n          <div className='column-settings__row'>\n            <SettingToggle disabled={browserPermission === 'denied'} prefix='notifications_desktop' settings={settings} settingPath={['alerts', 'favourite']} onChange={onChange} label={alertStr} />\n            {showPushSettings && <SettingToggle prefix='notifications_push' settings={pushSettings} settingPath={['alerts', 'favourite']} onChange={this.onPushChange} label={pushStr} />}\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['shows', 'favourite']} onChange={onChange} label={showStr} />\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['sounds', 'favourite']} onChange={onChange} label={soundStr} />\n          </div>\n        </div>\n\n        <div role='group' aria-labelledby='notifications-mention'>\n          <span id='notifications-mention' className='column-settings__section'><FormattedMessage id='notifications.column_settings.mention' defaultMessage='Mentions:' /></span>\n\n          <div className='column-settings__row'>\n            <SettingToggle disabled={browserPermission === 'denied'} prefix='notifications_desktop' settings={settings} settingPath={['alerts', 'mention']} onChange={onChange} label={alertStr} />\n            {showPushSettings && <SettingToggle prefix='notifications_push' settings={pushSettings} settingPath={['alerts', 'mention']} onChange={this.onPushChange} label={pushStr} />}\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['shows', 'mention']} onChange={onChange} label={showStr} />\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['sounds', 'mention']} onChange={onChange} label={soundStr} />\n          </div>\n        </div>\n\n        <div role='group' aria-labelledby='notifications-reblog'>\n          <span id='notifications-reblog' className='column-settings__section'><FormattedMessage id='notifications.column_settings.reblog' defaultMessage='Boosts:' /></span>\n\n          <div className='column-settings__row'>\n            <SettingToggle disabled={browserPermission === 'denied'} prefix='notifications_desktop' settings={settings} settingPath={['alerts', 'reblog']} onChange={onChange} label={alertStr} />\n            {showPushSettings && <SettingToggle prefix='notifications_push' settings={pushSettings} settingPath={['alerts', 'reblog']} onChange={this.onPushChange} label={pushStr} />}\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['shows', 'reblog']} onChange={onChange} label={showStr} />\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['sounds', 'reblog']} onChange={onChange} label={soundStr} />\n          </div>\n        </div>\n\n        <div role='group' aria-labelledby='notifications-poll'>\n          <span id='notifications-poll' className='column-settings__section'><FormattedMessage id='notifications.column_settings.poll' defaultMessage='Poll results:' /></span>\n\n          <div className='column-settings__row'>\n            <SettingToggle disabled={browserPermission === 'denied'} prefix='notifications_desktop' settings={settings} settingPath={['alerts', 'poll']} onChange={onChange} label={alertStr} />\n            {showPushSettings && <SettingToggle prefix='notifications_push' settings={pushSettings} settingPath={['alerts', 'poll']} onChange={this.onPushChange} label={pushStr} />}\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['shows', 'poll']} onChange={onChange} label={showStr} />\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['sounds', 'poll']} onChange={onChange} label={soundStr} />\n          </div>\n        </div>\n\n        <div role='group' aria-labelledby='notifications-status'>\n          <span id='notifications-status' className='column-settings__section'><FormattedMessage id='notifications.column_settings.status' defaultMessage='New posts:' /></span>\n\n          <div className='column-settings__row'>\n            <SettingToggle disabled={browserPermission === 'denied'} prefix='notifications_desktop' settings={settings} settingPath={['alerts', 'status']} onChange={onChange} label={alertStr} />\n            {showPushSettings && <SettingToggle prefix='notifications_push' settings={pushSettings} settingPath={['alerts', 'status']} onChange={this.onPushChange} label={pushStr} />}\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['shows', 'status']} onChange={onChange} label={showStr} />\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['sounds', 'status']} onChange={onChange} label={soundStr} />\n          </div>\n        </div>\n\n        <div role='group' aria-labelledby='notifications-update'>\n          <span id='notifications-update' className='column-settings__section'><FormattedMessage id='notifications.column_settings.update' defaultMessage='Edits:' /></span>\n\n          <div className='column-settings__row'>\n            <SettingToggle disabled={browserPermission === 'denied'} prefix='notifications_desktop' settings={settings} settingPath={['alerts', 'update']} onChange={onChange} label={alertStr} />\n            {showPushSettings && <SettingToggle prefix='notifications_push' settings={pushSettings} settingPath={['alerts', 'update']} onChange={this.onPushChange} label={pushStr} />}\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['shows', 'update']} onChange={onChange} label={showStr} />\n            <SettingToggle prefix='notifications' settings={settings} settingPath={['sounds', 'update']} onChange={onChange} label={soundStr} />\n          </div>\n        </div>\n\n        {(this.context.identity.permissions & PERMISSION_MANAGE_USERS === PERMISSION_MANAGE_USERS) && (\n          <div role='group' aria-labelledby='notifications-admin-sign-up'>\n            <span id='notifications-status' className='column-settings__section'><FormattedMessage id='notifications.column_settings.admin.sign_up' defaultMessage='New sign-ups:' /></span>\n\n            <div className='column-settings__row'>\n              <SettingToggle disabled={browserPermission === 'denied'} prefix='notifications_desktop' settings={settings} settingPath={['alerts', 'admin.sign_up']} onChange={onChange} label={alertStr} />\n              {showPushSettings && <SettingToggle prefix='notifications_push' settings={pushSettings} settingPath={['alerts', 'admin.sign_up']} onChange={this.onPushChange} label={pushStr} />}\n              <SettingToggle prefix='notifications' settings={settings} settingPath={['shows', 'admin.sign_up']} onChange={onChange} label={showStr} />\n              <SettingToggle prefix='notifications' settings={settings} settingPath={['sounds', 'admin.sign_up']} onChange={onChange} label={soundStr} />\n            </div>\n          </div>\n        )}\n\n        {(this.context.identity.permissions & PERMISSION_MANAGE_REPORTS === PERMISSION_MANAGE_REPORTS) && (\n          <div role='group' aria-labelledby='notifications-admin-report'>\n            <span id='notifications-status' className='column-settings__section'><FormattedMessage id='notifications.column_settings.admin.report' defaultMessage='New reports:' /></span>\n\n            <div className='column-settings__row'>\n              <SettingToggle disabled={browserPermission === 'denied'} prefix='notifications_desktop' settings={settings} settingPath={['alerts', 'admin.report']} onChange={onChange} label={alertStr} />\n              {showPushSettings && <SettingToggle prefix='notifications_push' settings={pushSettings} settingPath={['alerts', 'admin.report']} onChange={this.onPushChange} label={pushStr} />}\n              <SettingToggle prefix='notifications' settings={settings} settingPath={['shows', 'admin.report']} onChange={onChange} label={showStr} />\n              <SettingToggle prefix='notifications' settings={settings} settingPath={['sounds', 'admin.report']} onChange={onChange} label={soundStr} />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport ColumnSettings from '../components/column_settings';\nimport { changeSetting } from '../../../actions/settings';\nimport { setFilter } from '../../../actions/notifications';\nimport { clearNotifications, requestBrowserPermission } from '../../../actions/notifications';\nimport { changeAlerts as changePushNotifications } from '../../../actions/push_notifications';\nimport { openModal } from '../../../actions/modal';\nimport { showAlert } from '../../../actions/alerts';\n\nconst messages = defineMessages({\n  clearMessage: { id: 'notifications.clear_confirmation', defaultMessage: 'Are you sure you want to permanently clear all your notifications?' },\n  clearConfirm: { id: 'notifications.clear', defaultMessage: 'Clear notifications' },\n  permissionDenied: { id: 'notifications.permission_denied_alert', defaultMessage: 'Desktop notifications can\\'t be enabled, as browser permission has been denied before' },\n});\n\nconst mapStateToProps = state => ({\n  settings: state.getIn(['settings', 'notifications']),\n  pushSettings: state.get('push_notifications'),\n  alertsEnabled: state.getIn(['settings', 'notifications', 'alerts']).includes(true),\n  browserSupport: state.getIn(['notifications', 'browserSupport']),\n  browserPermission: state.getIn(['notifications', 'browserPermission']),\n});\n\nconst mapDispatchToProps = (dispatch, { intl }) => ({\n\n  onChange (path, checked) {\n    if (path[0] === 'push') {\n      if (checked && typeof window.Notification !== 'undefined' && Notification.permission !== 'granted') {\n        dispatch(requestBrowserPermission((permission) => {\n          if (permission === 'granted') {\n            dispatch(changePushNotifications(path.slice(1), checked));\n          } else {\n            dispatch(showAlert(undefined, messages.permissionDenied));\n          }\n        }));\n      } else {\n        dispatch(changePushNotifications(path.slice(1), checked));\n      }\n    } else if (path[0] === 'quickFilter') {\n      dispatch(changeSetting(['notifications', ...path], checked));\n      dispatch(setFilter('all'));\n    } else if (path[0] === 'alerts' && checked && typeof window.Notification !== 'undefined' && Notification.permission !== 'granted') {\n      if (checked && typeof window.Notification !== 'undefined' && Notification.permission !== 'granted') {\n        dispatch(requestBrowserPermission((permission) => {\n          if (permission === 'granted') {\n            dispatch(changeSetting(['notifications', ...path], checked));\n          } else {\n            dispatch(showAlert(undefined, messages.permissionDenied));\n          }\n        }));\n      } else {\n        dispatch(changeSetting(['notifications', ...path], checked));\n      }\n    } else {\n      dispatch(changeSetting(['notifications', ...path], checked));\n    }\n  },\n\n  onClear () {\n    dispatch(openModal('CONFIRM', {\n      message: intl.formatMessage(messages.clearMessage),\n      confirm: intl.formatMessage(messages.clearConfirm),\n      onConfirm: () => dispatch(clearNotifications()),\n    }));\n  },\n\n  onRequestNotificationPermission () {\n    dispatch(requestBrowserPermission());\n  },\n\n});\n\nexport default injectIntl(connect(mapStateToProps, mapDispatchToProps)(ColumnSettings));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport Icon from 'mastodon/components/icon';\n\nconst tooltips = defineMessages({\n  mentions: { id: 'notifications.filter.mentions', defaultMessage: 'Mentions' },\n  favourites: { id: 'notifications.filter.favourites', defaultMessage: 'Favourites' },\n  boosts: { id: 'notifications.filter.boosts', defaultMessage: 'Boosts' },\n  polls: { id: 'notifications.filter.polls', defaultMessage: 'Poll results' },\n  follows: { id: 'notifications.filter.follows', defaultMessage: 'Follows' },\n  statuses: { id: 'notifications.filter.statuses', defaultMessage: 'Updates from people you follow' },\n});\n\nexport default @injectIntl\nclass FilterBar extends React.PureComponent {\n\n  static propTypes = {\n    selectFilter: PropTypes.func.isRequired,\n    selectedFilter: PropTypes.string.isRequired,\n    advancedMode: PropTypes.bool.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  onClick (notificationType) {\n    return () => this.props.selectFilter(notificationType);\n  }\n\n  render () {\n    const { selectedFilter, advancedMode, intl } = this.props;\n    const renderedElement = !advancedMode ? (\n      <div className='notification__filter-bar'>\n        <button\n          className={selectedFilter === 'all' ? 'active' : ''}\n          onClick={this.onClick('all')}\n        >\n          <FormattedMessage\n            id='notifications.filter.all'\n            defaultMessage='All'\n          />\n        </button>\n        <button\n          className={selectedFilter === 'mention' ? 'active' : ''}\n          onClick={this.onClick('mention')}\n        >\n          <FormattedMessage\n            id='notifications.filter.mentions'\n            defaultMessage='Mentions'\n          />\n        </button>\n      </div>\n    ) : (\n      <div className='notification__filter-bar'>\n        <button\n          className={selectedFilter === 'all' ? 'active' : ''}\n          onClick={this.onClick('all')}\n        >\n          <FormattedMessage\n            id='notifications.filter.all'\n            defaultMessage='All'\n          />\n        </button>\n        <button\n          className={selectedFilter === 'mention' ? 'active' : ''}\n          onClick={this.onClick('mention')}\n          title={intl.formatMessage(tooltips.mentions)}\n        >\n          <Icon id='reply-all' fixedWidth />\n        </button>\n        <button\n          className={selectedFilter === 'favourite' ? 'active' : ''}\n          onClick={this.onClick('favourite')}\n          title={intl.formatMessage(tooltips.favourites)}\n        >\n          <Icon id='star' fixedWidth />\n        </button>\n        <button\n          className={selectedFilter === 'reblog' ? 'active' : ''}\n          onClick={this.onClick('reblog')}\n          title={intl.formatMessage(tooltips.boosts)}\n        >\n          <Icon id='retweet' fixedWidth />\n        </button>\n        <button\n          className={selectedFilter === 'poll' ? 'active' : ''}\n          onClick={this.onClick('poll')}\n          title={intl.formatMessage(tooltips.polls)}\n        >\n          <Icon id='tasks' fixedWidth />\n        </button>\n        <button\n          className={selectedFilter === 'status' ? 'active' : ''}\n          onClick={this.onClick('status')}\n          title={intl.formatMessage(tooltips.statuses)}\n        >\n          <Icon id='home' fixedWidth />\n        </button>\n        <button\n          className={selectedFilter === 'follow' ? 'active' : ''}\n          onClick={this.onClick('follow')}\n          title={intl.formatMessage(tooltips.follows)}\n        >\n          <Icon id='user-plus' fixedWidth />\n        </button>\n      </div>\n    );\n    return renderedElement;\n  }\n\n}\n","import { connect } from 'react-redux';\nimport FilterBar from '../components/filter_bar';\nimport { setFilter } from '../../../actions/notifications';\n\nconst makeMapStateToProps = state => ({\n  selectedFilter: state.getIn(['settings', 'notifications', 'quickFilter', 'active']),\n  advancedMode: state.getIn(['settings', 'notifications', 'quickFilter', 'advanced']),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  selectFilter (newActiveFilter) {\n    dispatch(setFilter(newActiveFilter));\n  },\n});\n\nexport default connect(makeMapStateToProps, mapDispatchToProps)(FilterBar);\n","import React from 'react';\nimport Icon from 'mastodon/components/icon';\nimport Button from 'mastodon/components/button';\nimport IconButton from 'mastodon/components/icon_button';\nimport { requestBrowserPermission } from 'mastodon/actions/notifications';\nimport { changeSetting } from 'mastodon/actions/settings';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nconst messages = defineMessages({\n  close: { id: 'lightbox.close', defaultMessage: 'Close' },\n});\n\nexport default @connect()\n@injectIntl\nclass NotificationsPermissionBanner extends React.PureComponent {\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  handleClick = () => {\n    this.props.dispatch(requestBrowserPermission());\n  }\n\n  handleClose = () => {\n    this.props.dispatch(changeSetting(['notifications', 'dismissPermissionBanner'], true));\n  }\n\n  render () {\n    const { intl } = this.props;\n\n    return (\n      <div className='notifications-permission-banner'>\n        <div className='notifications-permission-banner__close'>\n          <IconButton icon='times' onClick={this.handleClose} title={intl.formatMessage(messages.close)} />\n        </div>\n\n        <h2><FormattedMessage id='notifications_permission_banner.title' defaultMessage='Never miss a thing' /></h2>\n        <p><FormattedMessage id='notifications_permission_banner.how_to_control' defaultMessage=\"To receive notifications when Mastodon isn't open, enable desktop notifications. You can control precisely which types of interactions generate desktop notifications through the {icon} button above once they're enabled.\" values={{ icon: <Icon id='sliders' /> }} /></p>\n        <Button onClick={this.handleClick}><FormattedMessage id='notifications_permission_banner.enable' defaultMessage='Enable desktop notifications' /></Button>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport Column from '../../components/column';\nimport ColumnHeader from '../../components/column_header';\nimport {\n  expandNotifications,\n  scrollTopNotifications,\n  loadPending,\n  mountNotifications,\n  unmountNotifications,\n  markNotificationsAsRead,\n} from '../../actions/notifications';\nimport { submitMarkers } from '../../actions/markers';\nimport { addColumn, removeColumn, moveColumn } from '../../actions/columns';\nimport NotificationContainer from './containers/notification_container';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport ColumnSettingsContainer from './containers/column_settings_container';\nimport FilterBarContainer from './containers/filter_bar_container';\nimport { createSelector } from 'reselect';\nimport { List as ImmutableList } from 'immutable';\nimport { debounce } from 'lodash';\nimport ScrollableList from '../../components/scrollable_list';\nimport LoadGap from '../../components/load_gap';\nimport Icon from 'mastodon/components/icon';\nimport compareId from 'mastodon/compare_id';\nimport NotificationsPermissionBanner from './components/notifications_permission_banner';\n\nconst messages = defineMessages({\n  title: { id: 'column.notifications', defaultMessage: 'Notifications' },\n  markAsRead : { id: 'notifications.mark_as_read', defaultMessage: 'Mark every notification as read' },\n});\n\nconst getExcludedTypes = createSelector([\n  state => state.getIn(['settings', 'notifications', 'shows']),\n], (shows) => {\n  return ImmutableList(shows.filter(item => !item).keys());\n});\n\nconst getNotifications = createSelector([\n  state => state.getIn(['settings', 'notifications', 'quickFilter', 'show']),\n  state => state.getIn(['settings', 'notifications', 'quickFilter', 'active']),\n  getExcludedTypes,\n  state => state.getIn(['notifications', 'items']),\n], (showFilterBar, allowedType, excludedTypes, notifications) => {\n  if (!showFilterBar || allowedType === 'all') {\n    // used if user changed the notification settings after loading the notifications from the server\n    // otherwise a list of notifications will come pre-filtered from the backend\n    // we need to turn it off for FilterBar in order not to block ourselves from seeing a specific category\n    return notifications.filterNot(item => item !== null && excludedTypes.includes(item.get('type')));\n  }\n  return notifications.filter(item => item === null || allowedType === item.get('type'));\n});\n\nconst mapStateToProps = state => ({\n  showFilterBar: state.getIn(['settings', 'notifications', 'quickFilter', 'show']),\n  notifications: getNotifications(state),\n  isLoading: state.getIn(['notifications', 'isLoading'], true),\n  isUnread: state.getIn(['notifications', 'unread']) > 0 || state.getIn(['notifications', 'pendingItems']).size > 0,\n  hasMore: state.getIn(['notifications', 'hasMore']),\n  numPending: state.getIn(['notifications', 'pendingItems'], ImmutableList()).size,\n  lastReadId: state.getIn(['settings', 'notifications', 'showUnread']) ? state.getIn(['notifications', 'readMarkerId']) : '0',\n  canMarkAsRead: state.getIn(['settings', 'notifications', 'showUnread']) && state.getIn(['notifications', 'readMarkerId']) !== '0' && getNotifications(state).some(item => item !== null && compareId(item.get('id'), state.getIn(['notifications', 'readMarkerId'])) > 0),\n  needsNotificationPermission: state.getIn(['settings', 'notifications', 'alerts']).includes(true) && state.getIn(['notifications', 'browserSupport']) && state.getIn(['notifications', 'browserPermission']) === 'default' && !state.getIn(['settings', 'notifications', 'dismissPermissionBanner']),\n});\n\nexport default @connect(mapStateToProps)\n@injectIntl\nclass Notifications extends React.PureComponent {\n\n  static propTypes = {\n    columnId: PropTypes.string,\n    notifications: ImmutablePropTypes.list.isRequired,\n    showFilterBar: PropTypes.bool.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n    isLoading: PropTypes.bool,\n    isUnread: PropTypes.bool,\n    multiColumn: PropTypes.bool,\n    hasMore: PropTypes.bool,\n    numPending: PropTypes.number,\n    lastReadId: PropTypes.string,\n    canMarkAsRead: PropTypes.bool,\n    needsNotificationPermission: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    trackScroll: true,\n  };\n\n  componentWillMount() {\n    this.props.dispatch(mountNotifications());\n  }\n\n  componentWillUnmount () {\n    this.handleLoadOlder.cancel();\n    this.handleScrollToTop.cancel();\n    this.handleScroll.cancel();\n    this.props.dispatch(scrollTopNotifications(false));\n    this.props.dispatch(unmountNotifications());\n  }\n\n  handleLoadGap = (maxId) => {\n    this.props.dispatch(expandNotifications({ maxId }));\n  };\n\n  handleLoadOlder = debounce(() => {\n    const last = this.props.notifications.last();\n    this.props.dispatch(expandNotifications({ maxId: last && last.get('id') }));\n  }, 300, { leading: true });\n\n  handleLoadPending = () => {\n    this.props.dispatch(loadPending());\n  };\n\n  handleScrollToTop = debounce(() => {\n    this.props.dispatch(scrollTopNotifications(true));\n  }, 100);\n\n  handleScroll = debounce(() => {\n    this.props.dispatch(scrollTopNotifications(false));\n  }, 100);\n\n  handlePin = () => {\n    const { columnId, dispatch } = this.props;\n\n    if (columnId) {\n      dispatch(removeColumn(columnId));\n    } else {\n      dispatch(addColumn('NOTIFICATIONS', {}));\n    }\n  }\n\n  handleMove = (dir) => {\n    const { columnId, dispatch } = this.props;\n    dispatch(moveColumn(columnId, dir));\n  }\n\n  handleHeaderClick = () => {\n    this.column.scrollTop();\n  }\n\n  setColumnRef = c => {\n    this.column = c;\n  }\n\n  handleMoveUp = id => {\n    const elementIndex = this.props.notifications.findIndex(item => item !== null && item.get('id') === id) - 1;\n    this._selectChild(elementIndex, true);\n  }\n\n  handleMoveDown = id => {\n    const elementIndex = this.props.notifications.findIndex(item => item !== null && item.get('id') === id) + 1;\n    this._selectChild(elementIndex, false);\n  }\n\n  _selectChild (index, align_top) {\n    const container = this.column.node;\n    const element = container.querySelector(`article:nth-of-type(${index + 1}) .focusable`);\n\n    if (element) {\n      if (align_top && container.scrollTop > element.offsetTop) {\n        element.scrollIntoView(true);\n      } else if (!align_top && container.scrollTop + container.clientHeight < element.offsetTop + element.offsetHeight) {\n        element.scrollIntoView(false);\n      }\n      element.focus();\n    }\n  }\n\n  handleMarkAsRead = () => {\n    this.props.dispatch(markNotificationsAsRead());\n    this.props.dispatch(submitMarkers({ immediate: true }));\n  };\n\n  render () {\n    const { intl, notifications, isLoading, isUnread, columnId, multiColumn, hasMore, numPending, showFilterBar, lastReadId, canMarkAsRead, needsNotificationPermission } = this.props;\n    const pinned = !!columnId;\n    const emptyMessage = <FormattedMessage id='empty_column.notifications' defaultMessage=\"You don't have any notifications yet. When other people interact with you, you will see it here.\" />;\n\n    let scrollableContent = null;\n\n    const filterBarContainer = showFilterBar\n      ? (<FilterBarContainer />)\n      : null;\n\n    if (isLoading && this.scrollableContent) {\n      scrollableContent = this.scrollableContent;\n    } else if (notifications.size > 0 || hasMore) {\n      scrollableContent = notifications.map((item, index) => item === null ? (\n        <LoadGap\n          key={'gap:' + notifications.getIn([index + 1, 'id'])}\n          disabled={isLoading}\n          maxId={index > 0 ? notifications.getIn([index - 1, 'id']) : null}\n          onClick={this.handleLoadGap}\n        />\n      ) : (\n        <NotificationContainer\n          key={item.get('id')}\n          notification={item}\n          accountId={item.get('account')}\n          onMoveUp={this.handleMoveUp}\n          onMoveDown={this.handleMoveDown}\n          unread={lastReadId !== '0' && compareId(item.get('id'), lastReadId) > 0}\n        />\n      ));\n    } else {\n      scrollableContent = null;\n    }\n\n    this.scrollableContent = scrollableContent;\n\n    const scrollContainer = (\n      <ScrollableList\n        scrollKey={`notifications-${columnId}`}\n        trackScroll={!pinned}\n        isLoading={isLoading}\n        showLoading={isLoading && notifications.size === 0}\n        hasMore={hasMore}\n        numPending={numPending}\n        prepend={needsNotificationPermission && <NotificationsPermissionBanner />}\n        alwaysPrepend\n        emptyMessage={emptyMessage}\n        onLoadMore={this.handleLoadOlder}\n        onLoadPending={this.handleLoadPending}\n        onScrollToTop={this.handleScrollToTop}\n        onScroll={this.handleScroll}\n        bindToDocument={!multiColumn}\n      >\n        {scrollableContent}\n      </ScrollableList>\n    );\n\n    let extraButton = null;\n\n    if (canMarkAsRead) {\n      extraButton = (\n        <button\n          aria-label={intl.formatMessage(messages.markAsRead)}\n          title={intl.formatMessage(messages.markAsRead)}\n          onClick={this.handleMarkAsRead}\n          className='column-header__button'\n        >\n          <Icon id='check' />\n        </button>\n      );\n    }\n\n    return (\n      <Column bindToDocument={!multiColumn} ref={this.setColumnRef} label={intl.formatMessage(messages.title)}>\n        <ColumnHeader\n          icon='bell'\n          active={isUnread}\n          title={intl.formatMessage(messages.title)}\n          onPin={this.handlePin}\n          onMove={this.handleMove}\n          onClick={this.handleHeaderClick}\n          pinned={pinned}\n          multiColumn={multiColumn}\n          extraButton={extraButton}\n        >\n          <ColumnSettingsContainer />\n        </ColumnHeader>\n        {filterBarContainer}\n        {scrollContainer}\n      </Column>\n    );\n  }\n\n}\n"],"sourceRoot":""}