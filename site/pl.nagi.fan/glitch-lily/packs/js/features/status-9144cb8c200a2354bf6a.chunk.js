(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{1026:function(e,t,s){"use strict";s.d(t,"a",(function(){return P}));var a=s(0),i=s(1),o=s.n(i),n=s(3),l=s.n(n),d=s(16),r=s.n(d),c=s(100),h=s(136),u=s(264),p=s(676),g=s(618),m=s(4),b=s(677),f=s(18),k=s(56),v=s(233),O=s(984),M=s(7),_=s.n(M),j=s(20),y=s(355),C=s(683),I=s(12),w=s(279),x=s(283),D=s(684);var R,H=Object(I.connect)(((e,t)=>{let{statusId:s}=t;return{dropdownPlacement:e.getIn(["dropdown_menu","placement"]),openDropdownId:e.getIn(["dropdown_menu","openId"]),openedViaKeyboard:e.getIn(["dropdown_menu","keyboard"]),items:e.getIn(["history",s,"items"]),loading:e.getIn(["history",s,"loading"])}}),((e,t)=>{let{statusId:s}=t;return{onOpen(t,a,i,o){e(Object(x.d)(s)),e(Object(w.d)(t,i,o))},onClose(t){e(Object(w.c)(t))}}}))(D.a),T=s(35),N=s(93),U=s(985);let B=Object(I.connect)(null,((e,t)=>{let{statusId:s}=t;return{onItemClick(t){e(Object(T.d)("COMPARE_HISTORY",{index:t,statusId:s}))}}}))(R=Object(m.g)(R=class extends o.a.PureComponent{constructor(){super(...arguments),this.handleItemClick=(e,t)=>{const{onItemClick:s}=this.props;s(t)},this.renderHeader=e=>Object(a.a)(m.b,{id:"status.edited_x_times",defaultMessage:"Edited {count, plural, one {{count} time} other {{count} times}}",values:{count:e.size-1}}),this.renderItem=(e,t,s)=>{let{onClick:i,onKeyPress:o}=s;const n=Object(a.a)(N.default,{timestamp:e.get("created_at"),short:!1}),l=Object(a.a)(U.a,{accountId:e.get("account")}),d=e.get("original")?Object(a.a)(m.b,{id:"status.history.created",defaultMessage:"{name} created {date}",values:{name:l,date:n}}):Object(a.a)(m.b,{id:"status.history.edited",defaultMessage:"{name} edited {date}",values:{name:l,date:n}});return Object(a.a)("li",{className:"dropdown-menu__item edited-timestamp__history__item"},e.get("created_at"),Object(a.a)("button",{"data-index":t,onClick:i,onKeyPress:o},void 0,d))}}render(){const{timestamp:e,intl:t,statusId:s}=this.props;return Object(a.a)(H,{statusId:s,renderItem:this.renderItem,scrollable:!0,renderHeader:this.renderHeader,onItemClick:this.handleItemClick},void 0,Object(a.a)("button",{className:"dropdown-menu__text-button"},void 0,Object(a.a)(m.b,{id:"status.edited",defaultMessage:"Edited {date}",values:{date:t.formatDate(e,{hour12:!1,month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}})," ",Object(a.a)(j.a,{id:"caret-down"})))}})||R)||R;var E,V;const F=Object(m.f)({public_short:{id:"privacy.public.short",defaultMessage:"Public"},unlisted_short:{id:"privacy.unlisted.short",defaultMessage:"Unlisted"},private_short:{id:"privacy.private.short",defaultMessage:"Followers-only"},direct_short:{id:"privacy.direct.short",defaultMessage:"Direct"}});let P=Object(m.g)(((V=class extends f.a{constructor(){super(...arguments),this.state={height:null},this.handleAccountClick=e=>{0!==e.button||e.ctrlKey||e.metaKey||!this.context.router||(e.preventDefault(),this.context.router.history.push("/@"+this.props.status.getIn(["account","acct"]))),e.stopPropagation()},this.handleOpenVideo=e=>{this.props.onOpenVideo(this.props.status.getIn(["media_attachments",0]),e)},this.handleExpandedToggle=()=>{this.props.onToggleHidden(this.props.status)},this.setRef=e=>{this.node=e,this._measureHeight()},this.handleModalLink=e=>{let t;e.preventDefault(),t="A"!==e.target.nodeName?e.target.parentNode.href:e.target.href,window.open(t,"mastodon-intent","width=445,height=600,resizable=no,menubar=no,status=no,scrollbars=yes")}}_measureHeight(e){this.props.measureHeight&&this.node&&(Object(O.a)((()=>this.node&&this.setState({height:Math.ceil(this.node.scrollHeight)+1}))),this.props.onHeightChange&&e&&this.props.onHeightChange())}componentDidUpdate(e,t){this._measureHeight(t.height!==this.state.height)}render(){const e=this.props.status&&this.props.status.get("reblog")?this.props.status.get("reblog"):this.props.status,t={boxSizing:"border-box"},{intl:s,compact:i,pictureInPicture:n}=this.props;if(!e)return null;let l="",d="",r="",f="retweet",O="",M="";if(this.props.measureHeight&&(t.height=this.state.height+"px"),n.get("inUse"))l=Object(a.a)(C.a,{});else if(e.get("media_attachments").size>0)if("audio"===e.getIn(["media_attachments",0,"type"])){const t=e.getIn(["media_attachments",0]);l=Object(a.a)(v.default,{src:t.get("url"),alt:t.get("description"),duration:t.getIn(["meta","original","duration"],0),poster:t.get("preview_url")||e.getIn(["account","avatar_static"]),backgroundColor:t.getIn(["meta","colors","background"]),foregroundColor:t.getIn(["meta","colors","foreground"]),accentColor:t.getIn(["meta","colors","accent"]),sensitive:e.get("sensitive"),visible:this.props.showMedia,blurhash:t.get("blurhash"),height:150,onToggleVisibility:this.props.onToggleMediaVisibility})}else if("video"===e.getIn(["media_attachments",0,"type"])){const t=e.getIn(["media_attachments",0]);l=Object(a.a)(k.default,{preview:t.get("preview_url"),frameRate:t.getIn(["meta","original","frame_rate"]),blurhash:t.get("blurhash"),src:t.get("url"),alt:t.get("description"),width:300,height:150,inline:!0,onOpenVideo:this.handleOpenVideo,sensitive:e.get("sensitive"),visible:this.props.showMedia,onToggleVisibility:this.props.onToggleMediaVisibility})}else l=Object(a.a)(p.default,{standalone:!0,sensitive:e.get("sensitive"),media:e.get("media_attachments"),height:300,onOpenMedia:this.props.onOpenMedia,visible:this.props.showMedia,onToggleVisibility:this.props.onToggleMediaVisibility});else 0===e.get("spoiler_text").length&&(l=Object(a.a)(b.a,{sensitive:e.get("sensitive"),onOpenMedia:this.props.onOpenMedia,card:e.get("card",null)}));e.get("application")&&(d=Object(a.a)(o.a.Fragment,{},void 0," · ",Object(a.a)("a",{className:"detailed-status__application",href:e.getIn(["application","website"]),target:"_blank",rel:"noopener noreferrer"},void 0,e.getIn(["application","name"]))));const I={public:{icon:"globe",text:s.formatMessage(F.public_short)},unlisted:{icon:"unlock",text:s.formatMessage(F.unlisted_short)},private:{icon:"lock",text:s.formatMessage(F.private_short)},direct:{icon:"at",text:s.formatMessage(F.direct_short)}}[e.get("visibility")],w=Object(a.a)(o.a.Fragment,{},void 0," · ",Object(a.a)(j.a,{id:I.icon,title:I.text}));return r=["private","direct"].includes(e.get("visibility"))?"":this.context.router?Object(a.a)(o.a.Fragment,{},void 0,Object(a.a)(o.a.Fragment,{},void 0," · "),Object(a.a)(g.a,{to:"/@"+e.getIn(["account","acct"])+"/"+e.get("id")+"/reblogs",className:"detailed-status__link"},void 0,Object(a.a)(j.a,{id:f}),Object(a.a)("span",{className:"detailed-status__reblogs"},void 0,Object(a.a)(y.a,{value:e.get("reblogs_count")})))):Object(a.a)(o.a.Fragment,{},void 0,Object(a.a)(o.a.Fragment,{},void 0," · "),Object(a.a)("a",{href:"/interact/"+e.get("id")+"?type=reblog",className:"detailed-status__link",onClick:this.handleModalLink},void 0,Object(a.a)(j.a,{id:f}),Object(a.a)("span",{className:"detailed-status__reblogs"},void 0,Object(a.a)(y.a,{value:e.get("reblogs_count")})))),O=this.context.router?Object(a.a)(g.a,{to:"/@"+e.getIn(["account","acct"])+"/"+e.get("id")+"/favourites",className:"detailed-status__link"},void 0,Object(a.a)(j.a,{id:"star"}),Object(a.a)("span",{className:"detailed-status__favorites"},void 0,Object(a.a)(y.a,{value:e.get("favourites_count")}))):Object(a.a)("a",{href:"/interact/"+e.get("id")+"?type=favourite",className:"detailed-status__link",onClick:this.handleModalLink},void 0,Object(a.a)(j.a,{id:"star"}),Object(a.a)("span",{className:"detailed-status__favorites"},void 0,Object(a.a)(y.a,{value:e.get("favourites_count")}))),e.get("edited_at")&&(M=Object(a.a)(o.a.Fragment,{},void 0,Object(a.a)(o.a.Fragment,{},void 0," · "),Object(a.a)(B,{statusId:e.get("id"),timestamp:e.get("edited_at")}))),Object(a.a)("div",{style:t},void 0,o.a.createElement("div",{ref:this.setRef,className:_()("detailed-status","detailed-status-"+e.get("visibility"),{compact:i})},Object(a.a)("a",{href:e.getIn(["account","url"]),onClick:this.handleAccountClick,className:"detailed-status__display-name"},void 0,Object(a.a)("div",{className:"detailed-status__display-avatar"},void 0,Object(a.a)(c.a,{account:e.get("account"),size:48})),Object(a.a)(h.a,{account:e.get("account"),localDomain:this.props.domain})),Object(a.a)(u.a,{status:e,expanded:!e.get("hidden"),onExpandedToggle:this.handleExpandedToggle}),l,Object(a.a)("div",{className:"detailed-status__meta"},void 0,Object(a.a)("a",{className:"detailed-status__datetime",href:e.get("url"),target:"_blank",rel:"noopener noreferrer"},void 0,Object(a.a)(m.a,{value:new Date(e.get("created_at")),hour12:!1,year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})),M,w,d,r," · ",O)))}}).contextTypes={router:l.a.object},V.propTypes={status:r.a.map,onOpenMedia:l.a.func.isRequired,onOpenVideo:l.a.func.isRequired,onToggleHidden:l.a.func.isRequired,measureHeight:l.a.bool,onHeightChange:l.a.func,domain:l.a.string.isRequired,compact:l.a.bool,showMedia:l.a.bool,pictureInPicture:r.a.contains({inUse:l.a.bool,available:l.a.bool}),onToggleMediaVisibility:l.a.func},E=V))||E},1035:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return X}));var a,i,o=s(0),n=s(2),l=s(1),d=s.n(l),r=s(12),c=s(3),h=s.n(c),u=s(7),p=s.n(u),g=s(16),m=s.n(g),b=s(39),f=s(77),k=s(1311),v=s(1026),O=s(32),M=s(849),_=s(4),j=s(11),y=s(617);const C=Object(_.f)({delete:{id:"status.delete",defaultMessage:"Delete"},redraft:{id:"status.redraft",defaultMessage:"Delete & re-draft"},edit:{id:"status.edit",defaultMessage:"Edit"},direct:{id:"status.direct",defaultMessage:"Direct message @{name}"},mention:{id:"status.mention",defaultMessage:"Mention @{name}"},reply:{id:"status.reply",defaultMessage:"Reply"},reblog:{id:"status.reblog",defaultMessage:"Boost"},reblog_private:{id:"status.reblog_private",defaultMessage:"Boost with original visibility"},cancel_reblog_private:{id:"status.cancel_reblog_private",defaultMessage:"Unboost"},cannot_reblog:{id:"status.cannot_reblog",defaultMessage:"This post cannot be boosted"},favourite:{id:"status.favourite",defaultMessage:"Favourite"},bookmark:{id:"status.bookmark",defaultMessage:"Bookmark"},more:{id:"status.more",defaultMessage:"More"},mute:{id:"status.mute",defaultMessage:"Mute @{name}"},muteConversation:{id:"status.mute_conversation",defaultMessage:"Mute conversation"},unmuteConversation:{id:"status.unmute_conversation",defaultMessage:"Unmute conversation"},block:{id:"status.block",defaultMessage:"Block @{name}"},report:{id:"status.report",defaultMessage:"Report @{name}"},share:{id:"status.share",defaultMessage:"Share"},pin:{id:"status.pin",defaultMessage:"Pin on profile"},unpin:{id:"status.unpin",defaultMessage:"Unpin from profile"},embed:{id:"status.embed",defaultMessage:"Embed"},admin_account:{id:"status.admin_account",defaultMessage:"Open moderation interface for @{name}"},admin_status:{id:"status.admin_status",defaultMessage:"Open this status in the moderation interface"},copy:{id:"status.copy",defaultMessage:"Copy link to status"},blockDomain:{id:"account.block_domain",defaultMessage:"Block domain {domain}"},unblockDomain:{id:"account.unblock_domain",defaultMessage:"Unblock domain {domain}"},unmute:{id:"account.unmute",defaultMessage:"Unmute @{name}"},unblock:{id:"account.unblock",defaultMessage:"Unblock @{name}"}});let I=Object(r.connect)(((e,t)=>{let{status:s}=t;return{relationship:e.getIn(["relationships",s.getIn(["account","id"])])}}))(a=Object(_.g)(((i=class extends d.a.PureComponent{constructor(){super(...arguments),this.handleReplyClick=()=>{this.props.onReply(this.props.status)},this.handleReblogClick=e=>{this.props.onReblog(this.props.status,e)},this.handleFavouriteClick=()=>{this.props.onFavourite(this.props.status)},this.handleBookmarkClick=e=>{this.props.onBookmark(this.props.status,e)},this.handleDeleteClick=()=>{this.props.onDelete(this.props.status,this.context.router.history)},this.handleRedraftClick=()=>{this.props.onDelete(this.props.status,this.context.router.history,!0)},this.handleEditClick=()=>{this.props.onEdit(this.props.status,this.context.router.history)},this.handleDirectClick=()=>{this.props.onDirect(this.props.status.get("account"),this.context.router.history)},this.handleMentionClick=()=>{this.props.onMention(this.props.status.get("account"),this.context.router.history)},this.handleMuteClick=()=>{const{status:e,relationship:t,onMute:s,onUnmute:a}=this.props,i=e.get("account");t&&t.get("muting")?a(i):s(i)},this.handleBlockClick=()=>{const{status:e,relationship:t,onBlock:s,onUnblock:a}=this.props,i=e.get("account");t&&t.get("blocking")?a(i):s(e)},this.handleBlockDomain=()=>{const{status:e,onBlockDomain:t}=this.props;t(e.get("account").get("acct").split("@")[1])},this.handleUnblockDomain=()=>{const{status:e,onUnblockDomain:t}=this.props;t(e.get("account").get("acct").split("@")[1])},this.handleConversationMuteClick=()=>{this.props.onMuteConversation(this.props.status)},this.handleReport=()=>{this.props.onReport(this.props.status)},this.handlePinClick=()=>{this.props.onPin(this.props.status)},this.handleShare=()=>{navigator.share({text:this.props.status.get("search_index"),url:this.props.status.get("url")})},this.handleEmbed=()=>{this.props.onEmbed(this.props.status)},this.handleCopy=()=>{const e=this.props.status.get("url"),t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t);try{t.select(),document.execCommand("copy")}catch(e){}finally{document.body.removeChild(t)}}}render(){const{status:e,relationship:t,intl:s}=this.props,a=["public","unlisted"].includes(e.get("visibility")),i=["public","unlisted","private"].includes(e.get("visibility")),n=e.get("muted"),l=e.get("account"),d=e.getIn(["account","id"])===j.n;let r=[];if(a&&(r.push({text:s.formatMessage(C.copy),action:this.handleCopy}),r.push({text:s.formatMessage(C.embed),action:this.handleEmbed}),r.push(null)),d)i&&(r.push({text:s.formatMessage(e.get("pinned")?C.unpin:C.pin),action:this.handlePinClick}),r.push(null)),r.push({text:s.formatMessage(n?C.unmuteConversation:C.muteConversation),action:this.handleConversationMuteClick}),r.push(null),r.push({text:s.formatMessage(C.delete),action:this.handleDeleteClick}),r.push({text:s.formatMessage(C.redraft),action:this.handleRedraftClick});else{if(r.push({text:s.formatMessage(C.mention,{name:e.getIn(["account","username"])}),action:this.handleMentionClick}),r.push(null),t&&t.get("muting")?r.push({text:s.formatMessage(C.unmute,{name:l.get("username")}),action:this.handleMuteClick}):r.push({text:s.formatMessage(C.mute,{name:l.get("username")}),action:this.handleMuteClick}),t&&t.get("blocking")?r.push({text:s.formatMessage(C.unblock,{name:l.get("username")}),action:this.handleBlockClick}):r.push({text:s.formatMessage(C.block,{name:l.get("username")}),action:this.handleBlockClick}),r.push({text:s.formatMessage(C.report,{name:e.getIn(["account","username"])}),action:this.handleReport}),l.get("acct")!==l.get("username")){const e=l.get("acct").split("@")[1];r.push(null),t&&t.get("domain_blocking")?r.push({text:s.formatMessage(C.unblockDomain,{domain:e}),action:this.handleUnblockDomain}):r.push({text:s.formatMessage(C.blockDomain,{domain:e}),action:this.handleBlockDomain})}(this.context.identity.permissions&y.c)===y.c&&(r.push(null),r.push({text:s.formatMessage(C.admin_account,{name:e.getIn(["account","username"])}),href:"/admin/accounts/"+e.getIn(["account","id"])}),r.push({text:s.formatMessage(C.admin_status),href:"/admin/accounts/"+e.getIn(["account","id"])+"/statuses?id="+e.get("id")}))}const c="share"in navigator&&a&&Object(o.a)("div",{className:"detailed-status__button"},void 0,Object(o.a)(O.a,{title:s.formatMessage(C.share),icon:"share-alt",onClick:this.handleShare}));let h;h=null===e.get("in_reply_to_id",null)?"reply":"reply-all";const u=e.getIn(["account","id"])===j.n&&"private"===e.get("visibility");let g;return g=e.get("reblogged")?s.formatMessage(C.cancel_reblog_private):a?s.formatMessage(C.reblog):u?s.formatMessage(C.reblog_private):s.formatMessage(C.cannot_reblog),Object(o.a)("div",{className:"detailed-status__action-bar"},void 0,Object(o.a)("div",{className:"detailed-status__button"},void 0,Object(o.a)(O.a,{title:s.formatMessage(C.reply),icon:e.get("in_reply_to_account_id")===e.getIn(["account","id"])?"reply":h,onClick:this.handleReplyClick})),Object(o.a)("div",{className:"detailed-status__button"},void 0,Object(o.a)(O.a,{className:p()({reblogPrivate:u}),disabled:!a&&!u,active:e.get("reblogged"),title:g,icon:"retweet",onClick:this.handleReblogClick})),Object(o.a)("div",{className:"detailed-status__button"},void 0,Object(o.a)(O.a,{className:"star-icon",animate:!0,active:e.get("favourited"),title:s.formatMessage(C.favourite),icon:"star",onClick:this.handleFavouriteClick})),c,Object(o.a)("div",{className:"detailed-status__button"},void 0,Object(o.a)(O.a,{className:"bookmark-icon",active:e.get("bookmarked"),title:s.formatMessage(C.bookmark),icon:"bookmark",onClick:this.handleBookmarkClick})),Object(o.a)("div",{className:"detailed-status__action-bar-dropdown"},void 0,Object(o.a)(M.a,{size:18,icon:"ellipsis-h",status:e,items:r,direction:"left",title:s.formatMessage(C.more)})))}}).contextTypes={router:h.a.object,identity:h.a.object},a=i))||a)||a;var w,x,D,R=s(957),H=s(34),T=s(10),N=s(13),U=s(76),B=s(85),E=s(104),V=s(209),F=s(966),P=s(207),S=s(1344),A=s(963),z=s(958),q=s(1326),K=s(35),L=s(18),J=s(616),Y=s(250),W=s(1072),G=s(20);const Q=Object(_.f)({deleteConfirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"},deleteMessage:{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this status?"},redraftConfirm:{id:"confirmations.redraft.confirm",defaultMessage:"Delete & redraft"},redraftMessage:{id:"confirmations.redraft.message",defaultMessage:"Are you sure you want to delete this status and re-draft it? Favourites and boosts will be lost, and replies to the original post will be orphaned."},revealAll:{id:"status.show_more_all",defaultMessage:"Show more for all"},hideAll:{id:"status.show_less_all",defaultMessage:"Show less for all"},detailedStatus:{id:"status.detailed_status",defaultMessage:"Detailed conversation view"},replyConfirm:{id:"confirmations.reply.confirm",defaultMessage:"Reply"},replyMessage:{id:"confirmations.reply.message",defaultMessage:"Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?"},blockDomainConfirm:{id:"confirmations.domain_block.confirm",defaultMessage:"Hide entire domain"}});let X=(w=Object(r.connect)((()=>{const e=Object(P.h)(),t=Object(P.f)(),s=Object(b.a)([(e,t)=>{let{id:s}=t;return s},e=>e.getIn(["contexts","inReplyTos"])],((e,t)=>{let s=n.default.List();return s=s.withMutations((s=>{let a=e;for(;a&&!s.includes(a);)s.unshift(a),a=t.get(a)})),s})),a=Object(b.a)([(e,t)=>{let{id:s}=t;return s},e=>e.getIn(["contexts","replies"]),e=>e.get("statuses")],((e,t,s)=>{let a=[];const i=[e];for(;i.length>0;){let s=i.pop();const o=t.get(s);e!==s&&a.push(s),o&&o.reverse().forEach((t=>{i.includes(t)||a.includes(t)||e===t||i.push(t)}))}let o=a.findIndex((e=>s.get(e).get("in_reply_to_account_id")!==s.get(e).get("account")));return-1!==o&&a.forEach(((e,t)=>{t>o&&s.get(e).get("in_reply_to_account_id")===s.get(e).get("account")&&(a.splice(t,1),a.splice(o,0,e),o+=1)})),n.default.List(a)}));return(i,o)=>{const l=e(i,{id:o.params.statusId});let d=n.default.List(),r=n.default.List();return l&&(d=s(i,{id:l.get("in_reply_to_id")}),r=a(i,{id:l.get("id")})),{status:l,ancestorsIds:d,descendantsIds:r,askReplyConfirmation:0!==i.getIn(["compose","text"]).trim().length,domain:i.getIn(["meta","domain"]),pictureInPicture:t(i,{id:o.params.statusId})}}})),Object(_.g)(x=w(((D=class extends L.a{constructor(){var e;super(...arguments),e=this,this.state={fullscreen:!1,showMedia:Object(W.b)(this.props.status),loadedStatusId:void 0},this.handleToggleMediaVisibility=()=>{this.setState({showMedia:!this.state.showMedia})},this.handleFavouriteClick=e=>{e.get("favourited")?this.props.dispatch(Object(H.v)(e)):this.props.dispatch(Object(H.p)(e))},this.handlePin=e=>{e.get("pinned")?this.props.dispatch(Object(H.w)(e)):this.props.dispatch(Object(H.s)(e))},this.handleReplyClick=e=>{let{askReplyConfirmation:t,dispatch:s,intl:a}=this.props;s(t?Object(K.d)("CONFIRM",{message:a.formatMessage(Q.replyMessage),confirm:a.formatMessage(Q.replyConfirm),onConfirm:()=>s(Object(T.ub)(e,this.context.router.history))}):Object(T.ub)(e,this.context.router.history))},this.handleModalReblog=(e,t)=>{this.props.dispatch(Object(H.t)(e,t))},this.handleReblogClick=(e,t)=>{e.get("reblogged")?this.props.dispatch(Object(H.x)(e)):t&&t.shiftKey||!j.b?this.handleModalReblog(e):this.props.dispatch(Object(V.d)({status:e,onReblog:this.handleModalReblog}))},this.handleBookmarkClick=e=>{e.get("bookmarked")?this.props.dispatch(Object(H.u)(e)):this.props.dispatch(Object(H.o)(e))},this.handleDeleteClick=function(t,s,a){void 0===a&&(a=!1);const{dispatch:i,intl:o}=e.props;j.e?i(Object(K.d)("CONFIRM",{message:o.formatMessage(a?Q.redraftMessage:Q.deleteMessage),confirm:o.formatMessage(a?Q.redraftConfirm:Q.deleteConfirm),onConfirm:()=>i(Object(f.h)(t.get("id"),s,a))})):i(Object(f.h)(t.get("id"),s,a))},this.handleEditClick=(e,t)=>{this.props.dispatch(Object(f.i)(e.get("id"),t))},this.handleDirectClick=(e,t)=>{this.props.dispatch(Object(T.ib)(e,t))},this.handleMentionClick=(e,t)=>{this.props.dispatch(Object(T.ob)(e,t))},this.handleOpenMedia=(e,t)=>{this.props.dispatch(Object(K.d)("MEDIA",{statusId:this.props.status.get("id"),media:e,index:t}))},this.handleOpenVideo=(e,t)=>{this.props.dispatch(Object(K.d)("VIDEO",{statusId:this.props.status.get("id"),media:e,options:t}))},this.handleHotkeyOpenMedia=e=>{const{status:t}=this.props;e.preventDefault(),t.get("media_attachments").size>0&&("video"===t.getIn(["media_attachments",0,"type"])?this.handleOpenVideo(t.getIn(["media_attachments",0]),{startTime:0}):this.handleOpenMedia(t.get("media_attachments"),0))},this.handleMuteClick=e=>{this.props.dispatch(Object(B.m)(e))},this.handleConversationMuteClick=e=>{e.get("muted")?this.props.dispatch(Object(f.o)(e.get("id"))):this.props.dispatch(Object(f.l)(e.get("id")))},this.handleToggleHidden=e=>{e.get("hidden")?this.props.dispatch(Object(f.m)(e.get("id"))):this.props.dispatch(Object(f.k)(e.get("id")))},this.handleToggleAll=()=>{const{status:e,ancestorsIds:t,descendantsIds:s}=this.props,a=[e.get("id")].concat(t.toJS(),s.toJS());e.get("hidden")?this.props.dispatch(Object(f.m)(a)):this.props.dispatch(Object(f.k)(a))},this.handleBlockClick=e=>{const{dispatch:t}=this.props,s=e.get("account");t(Object(E.j)(s))},this.handleReport=e=>{this.props.dispatch(Object(F.a)(e.get("account"),e))},this.handleEmbed=e=>{this.props.dispatch(Object(K.d)("EMBED",{url:e.get("url")}))},this.handleUnmuteClick=e=>{this.props.dispatch(Object(N.ab)(e.get("id")))},this.handleUnblockClick=e=>{this.props.dispatch(Object(N.Y)(e.get("id")))},this.handleBlockDomainClick=e=>{this.props.dispatch(Object(K.d)("CONFIRM",{message:Object(o.a)(_.b,{id:"confirmations.domain_block.message",defaultMessage:"Are you really, really sure you want to block the entire {domain}? In most cases a few targeted blocks or mutes are sufficient and preferable. You will not see content from that domain in any public timelines or your notifications. Your followers from that domain will be removed.",values:{domain:Object(o.a)("strong",{},void 0,e)}}),confirm:this.props.intl.formatMessage(Q.blockDomainConfirm),onConfirm:()=>this.props.dispatch(Object(U.e)(e))}))},this.handleUnblockDomainClick=e=>{this.props.dispatch(Object(U.h)(e))},this.handleHotkeyMoveUp=()=>{this.handleMoveUp(this.props.status.get("id"))},this.handleHotkeyMoveDown=()=>{this.handleMoveDown(this.props.status.get("id"))},this.handleHotkeyReply=e=>{e.preventDefault(),this.handleReplyClick(this.props.status)},this.handleHotkeyFavourite=()=>{this.handleFavouriteClick(this.props.status)},this.handleHotkeyBoost=()=>{this.handleReblogClick(this.props.status)},this.handleHotkeyMention=e=>{e.preventDefault(),this.handleMentionClick(this.props.status.get("account"))},this.handleHotkeyOpenProfile=()=>{this.context.router.history.push("/@"+this.props.status.getIn(["account","acct"]))},this.handleHotkeyToggleHidden=()=>{this.handleToggleHidden(this.props.status)},this.handleHotkeyToggleSensitive=()=>{this.handleToggleMediaVisibility()},this.handleMoveUp=e=>{const{status:t,ancestorsIds:s,descendantsIds:a}=this.props;if(e===t.get("id"))this._selectChild(s.size-1,!0);else{let t=s.indexOf(e);-1===t?(t=a.indexOf(e),this._selectChild(s.size+t,!0)):this._selectChild(t-1,!0)}},this.handleMoveDown=e=>{const{status:t,ancestorsIds:s,descendantsIds:a}=this.props;if(e===t.get("id"))this._selectChild(s.size+1,!1);else{let t=s.indexOf(e);-1===t?(t=a.indexOf(e),this._selectChild(s.size+t+2,!1)):this._selectChild(t+1,!1)}},this.setRef=e=>{this.node=e},this.onFullScreenChange=()=>{this.setState({fullscreen:Object(Y.d)()})}}componentWillMount(){this.props.dispatch(Object(f.j)(this.props.params.statusId))}componentDidMount(){Object(Y.a)(this.onFullScreenChange)}componentWillReceiveProps(e){e.params.statusId!==this.props.params.statusId&&e.params.statusId&&(this._scrolledIntoView=!1,this.props.dispatch(Object(f.j)(e.params.statusId))),e.status&&e.status.get("id")!==this.state.loadedStatusId&&this.setState({showMedia:Object(W.b)(e.status),loadedStatusId:e.status.get("id")})}_selectChild(e,t){const s=this.node,a=s.querySelectorAll(".focusable")[e];a&&(t&&s.scrollTop>a.offsetTop?a.scrollIntoView(!0):!t&&s.scrollTop+s.clientHeight<a.offsetTop+a.offsetHeight&&a.scrollIntoView(!1),a.focus())}renderChildren(e){return e.map((e=>Object(o.a)(q.a,{id:e,onMoveUp:this.handleMoveUp,onMoveDown:this.handleMoveDown,contextType:"thread"},e)))}componentDidUpdate(){if(this._scrolledIntoView)return;const{status:e,ancestorsIds:t}=this.props;if(e&&t&&t.size>0){const e=this.node.querySelectorAll(".focusable")[t.size-1];window.requestAnimationFrame((()=>{e.scrollIntoView(!0)})),this._scrolledIntoView=!0}}componentWillUnmount(){Object(Y.b)(this.onFullScreenChange)}render(){let e,t;const{status:s,ancestorsIds:a,descendantsIds:i,intl:n,domain:l,multiColumn:r,pictureInPicture:c}=this.props,{fullscreen:h}=this.state;if(null===s)return Object(o.a)(R.a,{},void 0,Object(o.a)(A.a,{multiColumn:r}),Object(o.a)(k.a,{}));a&&a.size>0&&(e=Object(o.a)("div",{},void 0,this.renderChildren(a))),i&&i.size>0&&(t=Object(o.a)("div",{},void 0,this.renderChildren(i)));const u={moveUp:this.handleHotkeyMoveUp,moveDown:this.handleHotkeyMoveDown,reply:this.handleHotkeyReply,favourite:this.handleHotkeyFavourite,boost:this.handleHotkeyBoost,mention:this.handleHotkeyMention,openProfile:this.handleHotkeyOpenProfile,toggleHidden:this.handleHotkeyToggleHidden,toggleSensitive:this.handleHotkeyToggleSensitive,openMedia:this.handleHotkeyOpenMedia};return Object(o.a)(R.a,{bindToDocument:!r,label:n.formatMessage(Q.detailedStatus)},void 0,Object(o.a)(z.a,{showBackButton:!0,multiColumn:r,extraButton:Object(o.a)("button",{className:"column-header__button",title:n.formatMessage(s.get("hidden")?Q.revealAll:Q.hideAll),"aria-label":n.formatMessage(s.get("hidden")?Q.revealAll:Q.hideAll),onClick:this.handleToggleAll,"aria-pressed":s.get("hidden")?"false":"true"},void 0,Object(o.a)(G.a,{id:s.get("hidden")?"eye-slash":"eye"}))}),Object(o.a)(S.a,{scrollKey:"thread"},void 0,d.a.createElement("div",{className:p()("scrollable",{fullscreen:h}),ref:this.setRef},e,Object(o.a)(J.HotKeys,{handlers:u},void 0,Object(o.a)("div",{className:p()("focusable","detailed-status__wrapper"),tabIndex:"0","aria-label":Object(W.c)(n,s,!1)},void 0,Object(o.a)(v.a,{status:s,onOpenVideo:this.handleOpenVideo,onOpenMedia:this.handleOpenMedia,onToggleHidden:this.handleToggleHidden,domain:l,showMedia:this.state.showMedia,onToggleMediaVisibility:this.handleToggleMediaVisibility,pictureInPicture:c},"details-"+s.get("id")),Object(o.a)(I,{status:s,onReply:this.handleReplyClick,onFavourite:this.handleFavouriteClick,onReblog:this.handleReblogClick,onBookmark:this.handleBookmarkClick,onDelete:this.handleDeleteClick,onEdit:this.handleEditClick,onDirect:this.handleDirectClick,onMention:this.handleMentionClick,onMute:this.handleMuteClick,onUnmute:this.handleUnmuteClick,onMuteConversation:this.handleConversationMuteClick,onBlock:this.handleBlockClick,onUnblock:this.handleUnblockClick,onBlockDomain:this.handleBlockDomainClick,onUnblockDomain:this.handleUnblockDomainClick,onReport:this.handleReport,onPin:this.handlePin,onEmbed:this.handleEmbed},"action-bar-"+s.get("id")))),t)))}}).contextTypes={router:h.a.object},D.propTypes={params:h.a.object.isRequired,dispatch:h.a.func.isRequired,status:m.a.map,ancestorsIds:m.a.list,descendantsIds:m.a.list,intl:h.a.object.isRequired,askReplyConfirmation:h.a.bool,multiColumn:h.a.bool,domain:h.a.string.isRequired,pictureInPicture:m.a.contains({inUse:h.a.bool,available:h.a.bool})},x=D))||x)||x)}}]);
//# sourceMappingURL=status-9144cb8c200a2354bf6a.chunk.js.map