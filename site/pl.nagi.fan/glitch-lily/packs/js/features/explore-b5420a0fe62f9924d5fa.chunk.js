(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1021:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return Z}));var a=s(0),o=s(1),n=s.n(o),c=s(4),i=s(12),l=s(3),r=s.n(l),d=s(961),h=s(958),u=s(1287),b=s(1291),g=s(995),p=s(231),m=s(964),j=s(487),O=s(853),v=s(7),_=s.n(v);class x extends n.a.PureComponent{constructor(){super(...arguments),this.state={thumbnailLoaded:!1},this.handleImageLoad=()=>this.setState({thumbnailLoaded:!0})}render(){const{url:e,title:t,publisher:s,sharedTimes:o,thumbnail:c,blurhash:i}=this.props,{thumbnailLoaded:l}=this.state;return Object(a.a)("a",{className:"story",href:e,target:"blank",rel:"noopener"},void 0,Object(a.a)("div",{className:"story__details"},void 0,Object(a.a)("div",{className:"story__details__publisher"},void 0,s||Object(a.a)(O.a,{width:50})),Object(a.a)("div",{className:"story__details__title"},void 0,t||Object(a.a)(O.a,{})),Object(a.a)("div",{className:"story__details__shared"},void 0,"number"==typeof o?Object(a.a)(j.a,{value:o,renderer:m.b}):Object(a.a)(O.a,{width:100}))),Object(a.a)("div",{className:"story__thumbnail"},void 0,c?Object(a.a)(n.a.Fragment,{},void 0,Object(a.a)("div",{className:_()("story__thumbnail__preview",{"story__thumbnail__preview--hidden":l})},void 0,Object(a.a)(p.a,{hash:i})),Object(a.a)("img",{src:c,onLoad:this.handleImageLoad,alt:"",role:"presentation"})):Object(a.a)(O.a,{})))}}var L,M=s(281),f=s(65);let y=Object(i.connect)((e=>({links:e.getIn(["trends","links","items"]),isLoading:e.getIn(["trends","links","isLoading"])})))(L=class extends n.a.PureComponent{componentDidMount(){const{dispatch:e}=this.props;e(Object(f.o)())}render(){const{isLoading:e,links:t}=this.props;return Object(a.a)("div",{className:"explore__links"},void 0,e?Object(a.a)(M.b,{}):t.map((e=>Object(a.a)(x,{url:e.get("url"),title:e.get("title"),publisher:e.get("provider_name"),sharedTimes:1*e.getIn(["history",0,"accounts"])+1*e.getIn(["history",1,"accounts"]),thumbnail:e.get("image"),blurhash:e.get("blurhash")},e.get("id")))))}})||L;var k;let C=Object(i.connect)((e=>({hashtags:e.getIn(["trends","tags","items"]),isLoadingHashtags:e.getIn(["trends","tags","isLoading"])})))(k=class extends n.a.PureComponent{componentDidMount(){const{dispatch:e}=this.props;e(Object(f.n)())}render(){const{isLoading:e,hashtags:t}=this.props;return Object(a.a)("div",{className:"explore__links"},void 0,e?Object(a.a)(M.b,{}):t.map((e=>Object(a.a)(m.a,{hashtag:e},e.get("name")))))}})||k;var N,S=s(29),I=s.n(S),w=s(1319);let P=Object(i.connect)((e=>({statusIds:e.getIn(["status_lists","trending","items"]),isLoading:e.getIn(["status_lists","trending","isLoading"],!0),hasMore:!!e.getIn(["status_lists","trending","next"])})))(N=class extends n.a.PureComponent{constructor(){super(...arguments),this.handleLoadMore=I()((()=>{const{dispatch:e}=this.props;e(Object(f.m)())}),300,{leading:!0})}componentDidMount(){const{dispatch:e}=this.props;e(Object(f.p)())}render(){const{isLoading:e,hasMore:t,statusIds:s,multiColumn:o}=this.props,n=Object(a.a)(c.b,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"});return Object(a.a)(w.a,{trackScroll:!0,statusIds:s,scrollKey:"explore-statuses",hasMore:t,isLoading:e,onLoadMore:this.handleLoadMore,emptyMessage:n,bindToDocument:!o,withCounters:!0})}})||N;var H,A=s(1448),D=s(280);let T=Object(i.connect)((e=>({suggestions:e.getIn(["suggestions","items"]),isLoading:e.getIn(["suggestions","isLoading"])})))(H=class extends n.a.PureComponent{componentDidMount(){const{dispatch:e}=this.props;e(Object(D.f)(!0))}render(){const{isLoading:e,suggestions:t}=this.props;return Object(a.a)("div",{className:"explore__suggestions"},void 0,e?Object(a.a)(M.b,{}):t.map((e=>Object(a.a)(A.a,{id:e.get("account")},e.get("account")))))}})||H;var F,R=s(989),z=s(106),E=s(1304),J=s(1326),K=s(2),q=s(1327);const B=(e,t,s)=>t.size>=5?t.push(Object(a.a)(q.a,{visible:!0,onClick:s},e+"-load-more")):t,G=(e,t)=>B("accounts",e.get("accounts",Object(K.List)()).map((e=>Object(a.a)(E.a,{id:e},"account-"+e))),t),Q=(e,t)=>B("hashtags",e.get("hashtags",Object(K.List)()).map((e=>Object(a.a)(m.a,{hashtag:e},"tag-"+e.get("name")))),t),U=(e,t)=>B("statuses",e.get("statuses",Object(K.List)()).map((e=>Object(a.a)(J.a,{id:e},"status-"+e))),t);let V=Object(i.connect)((e=>({isLoading:e.getIn(["search","isLoading"]),results:e.getIn(["search","results"])})))(F=class extends n.a.PureComponent{constructor(){super(...arguments),this.state={type:"all"},this.handleSelectAll=()=>this.setState({type:"all"}),this.handleSelectAccounts=()=>this.setState({type:"accounts"}),this.handleSelectHashtags=()=>this.setState({type:"hashtags"}),this.handleSelectStatuses=()=>this.setState({type:"statuses"}),this.handleLoadMoreAccounts=()=>this.loadMore("accounts"),this.handleLoadMoreStatuses=()=>this.loadMore("statuses"),this.handleLoadMoreHashtags=()=>this.loadMore("hashtags")}loadMore(e){const{dispatch:t}=this.props;t(Object(z.j)(e))}render(){const{isLoading:e,results:t}=this.props,{type:s}=this.state;let o=Object(K.List)();if(!e){switch(s){case"all":o=o.concat(G(t,this.handleLoadMoreAccounts),Q(t,this.handleLoadMoreHashtags),U(t,this.handleLoadMoreStatuses));break;case"accounts":o=o.concat(G(t,this.handleLoadMoreAccounts));break;case"hashtags":o=o.concat(Q(t,this.handleLoadMoreHashtags));break;case"statuses":o=o.concat(U(t,this.handleLoadMoreStatuses))}0===o.size&&(o=Object(a.a)("div",{className:"empty-column-indicator"},void 0,Object(a.a)(c.b,{id:"search_results.nothing_found",defaultMessage:"Could not find anything for these search terms"})))}return Object(a.a)(n.a.Fragment,{},void 0,Object(a.a)("div",{className:"account__section-headline"},void 0,Object(a.a)("button",{onClick:this.handleSelectAll,className:"all"===s&&"active"},void 0,Object(a.a)(c.b,{id:"search_results.all",defaultMessage:"All"})),Object(a.a)("button",{onClick:this.handleSelectAccounts,className:"accounts"===s&&"active"},void 0,Object(a.a)(c.b,{id:"search_results.accounts",defaultMessage:"People"})),Object(a.a)("button",{onClick:this.handleSelectHashtags,className:"hashtags"===s&&"active"},void 0,Object(a.a)(c.b,{id:"search_results.hashtags",defaultMessage:"Hashtags"})),Object(a.a)("button",{onClick:this.handleSelectStatuses,className:"statuses"===s&&"active"},void 0,Object(a.a)(c.b,{id:"search_results.statuses",defaultMessage:"Posts"}))),Object(a.a)("div",{className:"explore__search-results"},void 0,e?Object(a.a)(M.b,{}):o))}})||F;var W,X;const Y=Object(c.f)({title:{id:"explore.title",defaultMessage:"Explore"},searchResults:{id:"explore.search_results",defaultMessage:"Search results"}});let Z=Object(i.connect)((e=>({layout:e.getIn(["meta","layout"]),isSearching:e.getIn(["search","submitted"])})))(W=Object(c.g)(((X=class extends n.a.PureComponent{constructor(){super(...arguments),this.handleHeaderClick=()=>{this.column.scrollTop()},this.setRef=e=>{this.column=e}}render(){const{intl:e,multiColumn:t,isSearching:s,layout:o}=this.props;return n.a.createElement(d.a,{bindToDocument:!t,ref:this.setRef,label:e.formatMessage(Y.title)},"mobile"===o?Object(a.a)("div",{className:"explore__search-header"},void 0,Object(a.a)(R.a,{})):Object(a.a)(h.a,{icon:s?"search":"hashtag",title:e.formatMessage(s?Y.searchResults:Y.title),onClick:this.handleHeaderClick,multiColumn:t}),Object(a.a)("div",{className:"scrollable scrollable--flex"},void 0,s?Object(a.a)(V,{}):Object(a.a)(n.a.Fragment,{},void 0,Object(a.a)("div",{className:"account__section-headline"},void 0,Object(a.a)(u.a,{exact:!0,to:"/explore"},void 0,Object(a.a)(c.b,{id:"explore.trending_statuses",defaultMessage:"Posts"})),Object(a.a)(u.a,{exact:!0,to:"/explore/tags"},void 0,Object(a.a)(c.b,{id:"explore.trending_tags",defaultMessage:"Hashtags"})),Object(a.a)(u.a,{exact:!0,to:"/explore/links"},void 0,Object(a.a)(c.b,{id:"explore.trending_links",defaultMessage:"News"})),Object(a.a)(u.a,{exact:!0,to:"/explore/suggestions"},void 0,Object(a.a)(c.b,{id:"explore.suggested_follows",defaultMessage:"For you"}))),Object(a.a)(b.a,{},void 0,Object(a.a)(g.a,{path:"/explore/tags",component:C}),Object(a.a)(g.a,{path:"/explore/links",component:y}),Object(a.a)(g.a,{path:"/explore/suggestions",component:T}),Object(a.a)(g.a,{exact:!0,path:["/explore","/explore/posts","/search"],component:P,componentParams:{multiColumn:t}})))))}}).contextTypes={router:r.a.object},W=X))||W)||W}}]);
//# sourceMappingURL=explore-b5420a0fe62f9924d5fa.chunk.js.map