{"version":3,"sources":["webpack:///./node_modules/requestidlecallback/index.js","webpack:///./node_modules/object-fit-images/dist/ofi.common-js.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/flavours/glitch/util/extra_polyfills.js","webpack:///app/javascript/builds/infra/glitch-lily/app/javascript/mastodon/extra_polyfills.js"],"names":["scheduleStart","throttleDelay","lazytimer","lazyraf","root","window","undefined","global","this","requestAnimationFrame","cancelRequestAnimationFrame","setTimeout","clearTimeout","tasks","runAttempts","isRunning","remainingTime","minThrottle","throttle","index","taskStart","tasklength","IdleDeadline","timeRemaining","Date","now","setInactive","debounce","fn","id","timestamp","wait","check","last","abortRunning","onInputorMutation","scheduleLazy","scheduleAfterRaf","runTasks","scheduleRaf","task","i","len","timeThreshold","length","shift","requestIdleCallbackShim","push","cancelIdleCallbackShim","requestIdleCallback","cancelIdleCallback","timeout","e","rIC","timeRemainingProto","IdleCallbackDeadline","prototype","Object","getOwnPropertyDescriptor","configurable","get","defineProperty","value","call","enumerable","document","addEventListener","forEach","name","capture","passive","MutationObserver","observe","documentElement","childList","subtree","attributes","request","cancel","OFI","propRegex","testImg","Image","style","supportsObjectFit","supportsObjectPosition","supportsOFI","supportsCurrentSrc","currentSrc","nativeGetAttribute","getAttribute","nativeSetAttribute","setAttribute","autoModeEnabled","setPlaceholder","img","width","height","placeholder","onImageReady","callback","naturalWidth","fixOne","el","parsed","getComputedStyle","fontFamily","props","exec","getStyle","ofi","skipTest","srcset","src","naturalHeight","descriptors","prop","set","ss","keepSrcUsable","err","console","warn","picturefill","pf","_","ns","evaled","fillImg","reselect","curSrc","supported","polyfillCurrentSrc","backgroundImage","replace","backgroundPosition","backgroundRepeat","backgroundOrigin","test","backgroundSize","fix","imgs","opts","startAutoMode","getElementsByTagName","querySelectorAll","body","target","tagName","watchMQ","bind","getOfiImageMaybe","HTMLImageElement","String","hijackAttributes","module","exports","objectFitImages"],"mappings":"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","file":"js/extra_polyfills-49003cc3410c47c085fd.chunk.js","sourcesContent":["(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory();\n  } else {\n    window.idleCallbackShim = factory();\n  }\n})(function () {\n  'use strict';\n\n  var scheduleStart, throttleDelay, lazytimer, lazyraf;\n  var root = typeof window != 'undefined' ? window : typeof global != undefined ? global : this || {};\n  var requestAnimationFrame = root.cancelRequestAnimationFrame && root.requestAnimationFrame || setTimeout;\n  var cancelRequestAnimationFrame = root.cancelRequestAnimationFrame || clearTimeout;\n  var tasks = [];\n  var runAttempts = 0;\n  var isRunning = false;\n  var remainingTime = 7;\n  var minThrottle = 35;\n  var throttle = 125;\n  var index = 0;\n  var taskStart = 0;\n  var tasklength = 0;\n  var IdleDeadline = {\n    get didTimeout() {\n      return false;\n    },\n\n    timeRemaining: function () {\n      var timeRemaining = remainingTime - (Date.now() - taskStart);\n      return timeRemaining < 0 ? 0 : timeRemaining;\n    }\n  };\n  var setInactive = debounce(function () {\n    remainingTime = 22;\n    throttle = 66;\n    minThrottle = 0;\n  });\n\n  function debounce(fn) {\n    var id, timestamp;\n    var wait = 99;\n\n    var check = function () {\n      var last = Date.now() - timestamp;\n\n      if (last < wait) {\n        id = setTimeout(check, wait - last);\n      } else {\n        id = null;\n        fn();\n      }\n    };\n\n    return function () {\n      timestamp = Date.now();\n\n      if (!id) {\n        id = setTimeout(check, wait);\n      }\n    };\n  }\n\n  function abortRunning() {\n    if (isRunning) {\n      if (lazyraf) {\n        cancelRequestAnimationFrame(lazyraf);\n      }\n\n      if (lazytimer) {\n        clearTimeout(lazytimer);\n      }\n\n      isRunning = false;\n    }\n  }\n\n  function onInputorMutation() {\n    if (throttle != 125) {\n      remainingTime = 7;\n      throttle = 125;\n      minThrottle = 35;\n\n      if (isRunning) {\n        abortRunning();\n        scheduleLazy();\n      }\n    }\n\n    setInactive();\n  }\n\n  function scheduleAfterRaf() {\n    lazyraf = null;\n    lazytimer = setTimeout(runTasks, 0);\n  }\n\n  function scheduleRaf() {\n    lazytimer = null;\n    requestAnimationFrame(scheduleAfterRaf);\n  }\n\n  function scheduleLazy() {\n    if (isRunning) {\n      return;\n    }\n\n    throttleDelay = throttle - (Date.now() - taskStart);\n    scheduleStart = Date.now();\n    isRunning = true;\n\n    if (minThrottle && throttleDelay < minThrottle) {\n      throttleDelay = minThrottle;\n    }\n\n    if (throttleDelay > 9) {\n      lazytimer = setTimeout(scheduleRaf, throttleDelay);\n    } else {\n      throttleDelay = 0;\n      scheduleRaf();\n    }\n  }\n\n  function runTasks() {\n    var task, i, len;\n    var timeThreshold = remainingTime > 9 ? 9 : 1;\n    taskStart = Date.now();\n    isRunning = false;\n    lazytimer = null;\n\n    if (runAttempts > 2 || taskStart - throttleDelay - 50 < scheduleStart) {\n      for (i = 0, len = tasks.length; i < len && IdleDeadline.timeRemaining() > timeThreshold; i++) {\n        task = tasks.shift();\n        tasklength++;\n\n        if (task) {\n          task(IdleDeadline);\n        }\n      }\n    }\n\n    if (tasks.length) {\n      scheduleLazy();\n    } else {\n      runAttempts = 0;\n    }\n  }\n\n  function requestIdleCallbackShim(task) {\n    index++;\n    tasks.push(task);\n    scheduleLazy();\n    return index;\n  }\n\n  function cancelIdleCallbackShim(id) {\n    var index = id - 1 - tasklength;\n\n    if (tasks[index]) {\n      tasks[index] = null;\n    }\n  }\n\n  if (!root.requestIdleCallback || !root.cancelIdleCallback) {\n    root.requestIdleCallback = requestIdleCallbackShim;\n    root.cancelIdleCallback = cancelIdleCallbackShim;\n\n    if (root.document && document.addEventListener) {\n      root.addEventListener('scroll', onInputorMutation, true);\n      root.addEventListener('resize', onInputorMutation);\n      document.addEventListener('focus', onInputorMutation, true);\n      document.addEventListener('mouseover', onInputorMutation, true);\n      ['click', 'keypress', 'touchstart', 'mousedown'].forEach(function (name) {\n        document.addEventListener(name, onInputorMutation, {\n          capture: true,\n          passive: true\n        });\n      });\n\n      if (root.MutationObserver) {\n        new MutationObserver(onInputorMutation).observe(document.documentElement, {\n          childList: true,\n          subtree: true,\n          attributes: true\n        });\n      }\n    }\n  } else {\n    try {\n      root.requestIdleCallback(function () {}, {\n        timeout: 0\n      });\n    } catch (e) {\n      (function (rIC) {\n        var timeRemainingProto, timeRemaining;\n\n        root.requestIdleCallback = function (fn, timeout) {\n          if (timeout && typeof timeout.timeout == 'number') {\n            return rIC(fn, timeout.timeout);\n          }\n\n          return rIC(fn);\n        };\n\n        if (root.IdleCallbackDeadline && (timeRemainingProto = IdleCallbackDeadline.prototype)) {\n          timeRemaining = Object.getOwnPropertyDescriptor(timeRemainingProto, 'timeRemaining');\n\n          if (!timeRemaining || !timeRemaining.configurable || !timeRemaining.get) {\n            return;\n          }\n\n          Object.defineProperty(timeRemainingProto, 'timeRemaining', {\n            value: function () {\n              return timeRemaining.get.call(this);\n            },\n            enumerable: true,\n            configurable: true\n          });\n        }\n      })(root.requestIdleCallback);\n    }\n  }\n\n  return {\n    request: requestIdleCallbackShim,\n    cancel: cancelIdleCallbackShim\n  };\n});","/*! npm.im/object-fit-images 3.2.4 */\n'use strict';\n\nvar OFI = 'bfred-it:object-fit-images';\nvar propRegex = /(object-fit|object-position)\\s*:\\s*([-.\\w\\s%]+)/g;\nvar testImg = typeof Image === 'undefined' ? {\n  style: {\n    'object-position': 1\n  }\n} : new Image();\nvar supportsObjectFit = ('object-fit' in testImg.style);\nvar supportsObjectPosition = ('object-position' in testImg.style);\nvar supportsOFI = ('background-size' in testImg.style);\nvar supportsCurrentSrc = typeof testImg.currentSrc === 'string';\nvar nativeGetAttribute = testImg.getAttribute;\nvar nativeSetAttribute = testImg.setAttribute;\nvar autoModeEnabled = false;\n\nfunction createPlaceholder(w, h) {\n  return \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='\" + w + \"' height='\" + h + \"'%3E%3C/svg%3E\";\n}\n\nfunction polyfillCurrentSrc(el) {\n  if (el.srcset && !supportsCurrentSrc && window.picturefill) {\n    var pf = window.picturefill._; // parse srcset with picturefill where currentSrc isn't available\n\n    if (!el[pf.ns] || !el[pf.ns].evaled) {\n      // force synchronous srcset parsing\n      pf.fillImg(el, {\n        reselect: true\n      });\n    }\n\n    if (!el[pf.ns].curSrc) {\n      // force picturefill to parse srcset\n      el[pf.ns].supported = false;\n      pf.fillImg(el, {\n        reselect: true\n      });\n    } // retrieve parsed currentSrc, if any\n\n\n    el.currentSrc = el[pf.ns].curSrc || el.src;\n  }\n}\n\nfunction getStyle(el) {\n  var style = getComputedStyle(el).fontFamily;\n  var parsed;\n  var props = {};\n\n  while ((parsed = propRegex.exec(style)) !== null) {\n    props[parsed[1]] = parsed[2];\n  }\n\n  return props;\n}\n\nfunction setPlaceholder(img, width, height) {\n  // Default: fill width, no height\n  var placeholder = createPlaceholder(width || 1, height || 0); // Only set placeholder if it's different\n\n  if (nativeGetAttribute.call(img, 'src') !== placeholder) {\n    nativeSetAttribute.call(img, 'src', placeholder);\n  }\n}\n\nfunction onImageReady(img, callback) {\n  // naturalWidth is only available when the image headers are loaded,\n  // this loop will poll it every 100ms.\n  if (img.naturalWidth) {\n    callback(img);\n  } else {\n    setTimeout(onImageReady, 100, img, callback);\n  }\n}\n\nfunction fixOne(el) {\n  var style = getStyle(el);\n  var ofi = el[OFI];\n  style['object-fit'] = style['object-fit'] || 'fill'; // default value\n  // Avoid running where unnecessary, unless OFI had already done its deed\n\n  if (!ofi.img) {\n    // fill is the default behavior so no action is necessary\n    if (style['object-fit'] === 'fill') {\n      return;\n    } // Where object-fit is supported and object-position isn't (Safari < 10)\n\n\n    if (!ofi.skipTest && // unless user wants to apply regardless of browser support\n    supportsObjectFit && // if browser already supports object-fit\n    !style['object-position'] // unless object-position is used\n    ) {\n      return;\n    }\n  } // keep a clone in memory while resetting the original to a blank\n\n\n  if (!ofi.img) {\n    ofi.img = new Image(el.width, el.height);\n    ofi.img.srcset = nativeGetAttribute.call(el, \"data-ofi-srcset\") || el.srcset;\n    ofi.img.src = nativeGetAttribute.call(el, \"data-ofi-src\") || el.src; // preserve for any future cloneNode calls\n    // https://github.com/bfred-it/object-fit-images/issues/53\n\n    nativeSetAttribute.call(el, \"data-ofi-src\", el.src);\n\n    if (el.srcset) {\n      nativeSetAttribute.call(el, \"data-ofi-srcset\", el.srcset);\n    }\n\n    setPlaceholder(el, el.naturalWidth || el.width, el.naturalHeight || el.height); // remove srcset because it overrides src\n\n    if (el.srcset) {\n      el.srcset = '';\n    }\n\n    try {\n      keepSrcUsable(el);\n    } catch (err) {\n      if (window.console) {\n        console.warn('https://bit.ly/ofi-old-browser');\n      }\n    }\n  }\n\n  polyfillCurrentSrc(ofi.img);\n  el.style.backgroundImage = \"url(\\\"\" + (ofi.img.currentSrc || ofi.img.src).replace(/\"/g, '\\\\\"') + \"\\\")\";\n  el.style.backgroundPosition = style['object-position'] || 'center';\n  el.style.backgroundRepeat = 'no-repeat';\n  el.style.backgroundOrigin = 'content-box';\n\n  if (/scale-down/.test(style['object-fit'])) {\n    onImageReady(ofi.img, function () {\n      if (ofi.img.naturalWidth > el.width || ofi.img.naturalHeight > el.height) {\n        el.style.backgroundSize = 'contain';\n      } else {\n        el.style.backgroundSize = 'auto';\n      }\n    });\n  } else {\n    el.style.backgroundSize = style['object-fit'].replace('none', 'auto').replace('fill', '100% 100%');\n  }\n\n  onImageReady(ofi.img, function (img) {\n    setPlaceholder(el, img.naturalWidth, img.naturalHeight);\n  });\n}\n\nfunction keepSrcUsable(el) {\n  var descriptors = {\n    get: function get(prop) {\n      return el[OFI].img[prop ? prop : 'src'];\n    },\n    set: function set(value, prop) {\n      el[OFI].img[prop ? prop : 'src'] = value;\n      nativeSetAttribute.call(el, \"data-ofi-\" + prop, value); // preserve for any future cloneNode\n\n      fixOne(el);\n      return value;\n    }\n  };\n  Object.defineProperty(el, 'src', descriptors);\n  Object.defineProperty(el, 'currentSrc', {\n    get: function () {\n      return descriptors.get('currentSrc');\n    }\n  });\n  Object.defineProperty(el, 'srcset', {\n    get: function () {\n      return descriptors.get('srcset');\n    },\n    set: function (ss) {\n      return descriptors.set(ss, 'srcset');\n    }\n  });\n}\n\nfunction hijackAttributes() {\n  function getOfiImageMaybe(el, name) {\n    return el[OFI] && el[OFI].img && (name === 'src' || name === 'srcset') ? el[OFI].img : el;\n  }\n\n  if (!supportsObjectPosition) {\n    HTMLImageElement.prototype.getAttribute = function (name) {\n      return nativeGetAttribute.call(getOfiImageMaybe(this, name), name);\n    };\n\n    HTMLImageElement.prototype.setAttribute = function (name, value) {\n      return nativeSetAttribute.call(getOfiImageMaybe(this, name), name, String(value));\n    };\n  }\n}\n\nfunction fix(imgs, opts) {\n  var startAutoMode = !autoModeEnabled && !imgs;\n  opts = opts || {};\n  imgs = imgs || 'img';\n\n  if (supportsObjectPosition && !opts.skipTest || !supportsOFI) {\n    return false;\n  } // use imgs as a selector or just select all images\n\n\n  if (imgs === 'img') {\n    imgs = document.getElementsByTagName('img');\n  } else if (typeof imgs === 'string') {\n    imgs = document.querySelectorAll(imgs);\n  } else if (!('length' in imgs)) {\n    imgs = [imgs];\n  } // apply fix to all\n\n\n  for (var i = 0; i < imgs.length; i++) {\n    imgs[i][OFI] = imgs[i][OFI] || {\n      skipTest: opts.skipTest\n    };\n    fixOne(imgs[i]);\n  }\n\n  if (startAutoMode) {\n    document.body.addEventListener('load', function (e) {\n      if (e.target.tagName === 'IMG') {\n        fix(e.target, {\n          skipTest: opts.skipTest\n        });\n      }\n    }, true);\n    autoModeEnabled = true;\n    imgs = 'img'; // reset to a generic selector for watchMQ\n  } // if requested, watch media queries for object-fit change\n\n\n  if (opts.watchMQ) {\n    window.addEventListener('resize', fix.bind(null, imgs, {\n      skipTest: opts.skipTest\n    }));\n  }\n}\n\nfix.supportsObjectFit = supportsObjectFit;\nfix.supportsObjectPosition = supportsObjectPosition;\nhijackAttributes();\nmodule.exports = fix;","import 'intersection-observer';\nimport 'requestidlecallback';\nimport objectFitImages  from 'object-fit-images';\n\nobjectFitImages();\n","import 'intersection-observer';\nimport 'requestidlecallback';\nimport objectFitImages from 'object-fit-images';\n\nobjectFitImages();\n"],"sourceRoot":""}